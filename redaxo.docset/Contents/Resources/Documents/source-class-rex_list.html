<!DOCTYPE html>
<html lang="de">
 <head>
  <meta charset="utf-8"/>
  <link href="../Assets/css/styles.css" rel="stylesheet"/>
  <script src="../Assets/js/script.js">
  </script>
 </head>
 <body>
  <pre id="source"><code><span class="l" id="1"><a class="l" href="#1">   1 </a><span class="xlang">&lt;?php</span>
</span><span class="l" id="2"><a class="l" href="#2">   2 </a>
</span><span class="l" id="3"><a class="l" href="#3">   3 </a><span class="php-comment">// Nötige Konstanten</span>
</span><span class="l" id="4"><a class="l" href="#4">   4 </a><span class="php-keyword2">define</span>(<span class="php-quote">'REX_LIST_OPT_SORT'</span>, <span class="php-num">0</span>);
</span><span class="l" id="5"><a class="l" href="#5">   5 </a><span class="php-keyword2">define</span>(<span class="php-quote">'REX_LIST_OPT_SORT_DIRECTION'</span>, <span class="php-num">1</span>);
</span><span class="l" id="6"><a class="l" href="#6">   6 </a>
</span><span class="l" id="7"><a class="l" href="#7">   7 </a><span class="php-comment">/*
</span></span><span class="l" id="8"><a class="l" href="#8">   8 </a><span class="php-comment">EXAMPLE:
</span></span><span class="l" id="9"><a class="l" href="#9">   9 </a><span class="php-comment">
</span></span><span class="l" id="10"><a class="l" href="#10">  10 </a><span class="php-comment">$list = rex_list::factory('SELECT id,name FROM rex_article');
</span></span><span class="l" id="11"><a class="l" href="#11">  11 </a><span class="php-comment">$list-&gt;setColumnFormat('id', 'date');
</span></span><span class="l" id="12"><a class="l" href="#12">  12 </a><span class="php-comment">$list-&gt;setColumnLabel('name', 'Artikel-Name');
</span></span><span class="l" id="13"><a class="l" href="#13">  13 </a><span class="php-comment">$list-&gt;setColumnSortable('name');
</span></span><span class="l" id="14"><a class="l" href="#14">  14 </a><span class="php-comment">$list-&gt;addColumn('testhead','###id### - ###name###',-1);
</span></span><span class="l" id="15"><a class="l" href="#15">  15 </a><span class="php-comment">$list-&gt;addColumn('testhead2','testbody2');
</span></span><span class="l" id="16"><a class="l" href="#16">  16 </a><span class="php-comment">$list-&gt;setCaption('thomas macht das css');
</span></span><span class="l" id="17"><a class="l" href="#17">  17 </a><span class="php-comment">$list-&gt;show();
</span></span><span class="l" id="18"><a class="l" href="#18">  18 </a><span class="php-comment">
</span></span><span class="l" id="19"><a class="l" href="#19">  19 </a><span class="php-comment">
</span></span><span class="l" id="20"><a class="l" href="#20">  20 </a><span class="php-comment">EXAMPLE USING CUSTOM CALLBACKS WITH setColumnFormat() METHOD:
</span></span><span class="l" id="21"><a class="l" href="#21">  21 </a><span class="php-comment">
</span></span><span class="l" id="22"><a class="l" href="#22">  22 </a><span class="php-comment">function callback_func($params)
</span></span><span class="l" id="23"><a class="l" href="#23">  23 </a><span class="php-comment">{
</span></span><span class="l" id="24"><a class="l" href="#24">  24 </a><span class="php-comment">    // $params['subject']  current value
</span></span><span class="l" id="25"><a class="l" href="#25">  25 </a><span class="php-comment">    // $params['list']     rex_list object
</span></span><span class="l" id="26"><a class="l" href="#26">  26 </a><span class="php-comment">    // $params['params']   custom params
</span></span><span class="l" id="27"><a class="l" href="#27">  27 </a><span class="php-comment">
</span></span><span class="l" id="28"><a class="l" href="#28">  28 </a><span class="php-comment">    return $custom_string; // return value showed in list (note: no htmlspechialchars!)
</span></span><span class="l" id="29"><a class="l" href="#29">  29 </a><span class="php-comment">}
</span></span><span class="l" id="30"><a class="l" href="#30">  30 </a><span class="php-comment">
</span></span><span class="l" id="31"><a class="l" href="#31">  31 </a><span class="php-comment">// USING setColumnFormat() BY CALLING A FUNCTION
</span></span><span class="l" id="32"><a class="l" href="#32">  32 </a><span class="php-comment">$list-&gt;setColumnFormat('id',                                     // field name
</span></span><span class="l" id="33"><a class="l" href="#33">  33 </a><span class="php-comment">                                             'custom',                                 // format type
</span></span><span class="l" id="34"><a class="l" href="#34">  34 </a><span class="php-comment">                                             'callback_func',                          // callback function name
</span></span><span class="l" id="35"><a class="l" href="#35">  35 </a><span class="php-comment">                                                array('foo' =&gt; 'bar', '123' =&gt; '456')    // optional params for callback function
</span></span><span class="l" id="36"><a class="l" href="#36">  36 </a><span class="php-comment">);
</span></span><span class="l" id="37"><a class="l" href="#37">  37 </a><span class="php-comment">
</span></span><span class="l" id="38"><a class="l" href="#38">  38 </a><span class="php-comment">// USING setColumnFormat() BY CALLING CLASS &amp; METHOD
</span></span><span class="l" id="39"><a class="l" href="#39">  39 </a><span class="php-comment">$list-&gt;setColumnFormat('id',                                     // field name
</span></span><span class="l" id="40"><a class="l" href="#40">  40 </a><span class="php-comment">                                             'custom',                                 // format type
</span></span><span class="l" id="41"><a class="l" href="#41">  41 </a><span class="php-comment">                                                array('CLASS','METHOD'),                 // callback class/method name
</span></span><span class="l" id="42"><a class="l" href="#42">  42 </a><span class="php-comment">                                                array('foo' =&gt; 'bar', '123' =&gt; '456')    // optional params for callback function
</span></span><span class="l" id="43"><a class="l" href="#43">  43 </a><span class="php-comment">                                             );
</span></span><span class="l" id="44"><a class="l" href="#44">  44 </a><span class="php-comment">*/</span>
</span><span class="l" id="45"><a class="l" href="#45">  45 </a>
</span><span class="l" id="46"><a class="l" href="#46">  46 </a><span class="php-comment">/**
</span></span><span class="l" id="47"><a class="l" href="#47">  47 </a><span class="php-comment"> * Klasse zum erstellen von Listen.
</span></span><span class="l" id="48"><a class="l" href="#48">  48 </a><span class="php-comment"> *
</span></span><span class="l" id="49"><a class="l" href="#49">  49 </a><span class="php-comment"> * @package redaxo\core
</span></span><span class="l" id="50"><a class="l" href="#50">  50 </a><span class="php-comment"> */</span>
</span><span class="l" id="51"><a class="l" href="#51">  51 </a><span class="php-keyword1">class</span> <a href="#rex_list" id="rex_list">rex_list</a> <span class="php-keyword1">implements</span> rex_url_provider_interface
</span><span class="l" id="52"><a class="l" href="#52">  52 </a>{
</span><span class="l" id="53"><a class="l" href="#53">  53 </a>    <span class="php-keyword1">use</span> rex_factory_trait;
</span><span class="l" id="54"><a class="l" href="#54">  54 </a>
</span><span class="l" id="55"><a class="l" href="#55">  55 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$query" id="$query">$query</a></span>;
</span><span class="l" id="56"><a class="l" href="#56">  56 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$sql" id="$sql">$sql</a></span>;
</span><span class="l" id="57"><a class="l" href="#57">  57 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$debug" id="$debug">$debug</a></span>;
</span><span class="l" id="58"><a class="l" href="#58">  58 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$noRowsMessage" id="$noRowsMessage">$noRowsMessage</a></span>;
</span><span class="l" id="59"><a class="l" href="#59">  59 </a>
</span><span class="l" id="60"><a class="l" href="#60">  60 </a>    <span class="php-comment">// --------- List Attributes</span>
</span><span class="l" id="61"><a class="l" href="#61">  61 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$name" id="$name">$name</a></span>;
</span><span class="l" id="62"><a class="l" href="#62">  62 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$params" id="$params">$params</a></span>;
</span><span class="l" id="63"><a class="l" href="#63">  63 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$rows" id="$rows">$rows</a></span>;
</span><span class="l" id="64"><a class="l" href="#64">  64 </a>
</span><span class="l" id="65"><a class="l" href="#65">  65 </a>    <span class="php-comment">// --------- Form Attributes</span>
</span><span class="l" id="66"><a class="l" href="#66">  66 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$formAttributes" id="$formAttributes">$formAttributes</a></span>;
</span><span class="l" id="67"><a class="l" href="#67">  67 </a>
</span><span class="l" id="68"><a class="l" href="#68">  68 </a>    <span class="php-comment">// --------- Column Attributes</span>
</span><span class="l" id="69"><a class="l" href="#69">  69 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$customColumns" id="$customColumns">$customColumns</a></span>;
</span><span class="l" id="70"><a class="l" href="#70">  70 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$columnNames" id="$columnNames">$columnNames</a></span>;
</span><span class="l" id="71"><a class="l" href="#71">  71 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$columnLabels" id="$columnLabels">$columnLabels</a></span>;
</span><span class="l" id="72"><a class="l" href="#72">  72 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$columnFormates" id="$columnFormates">$columnFormates</a></span>;
</span><span class="l" id="73"><a class="l" href="#73">  73 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$columnOptions" id="$columnOptions">$columnOptions</a></span>;
</span><span class="l" id="74"><a class="l" href="#74">  74 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$columnAttributes" id="$columnAttributes">$columnAttributes</a></span>;
</span><span class="l" id="75"><a class="l" href="#75">  75 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$columnLayouts" id="$columnLayouts">$columnLayouts</a></span>;
</span><span class="l" id="76"><a class="l" href="#76">  76 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$columnParams" id="$columnParams">$columnParams</a></span>;
</span><span class="l" id="77"><a class="l" href="#77">  77 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$columnDisabled" id="$columnDisabled">$columnDisabled</a></span>;
</span><span class="l" id="78"><a class="l" href="#78">  78 </a>
</span><span class="l" id="79"><a class="l" href="#79">  79 </a>    <span class="php-comment">// --------- Layout, Default</span>
</span><span class="l" id="80"><a class="l" href="#80">  80 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$defaultColumnLayout" id="$defaultColumnLayout">$defaultColumnLayout</a></span>;
</span><span class="l" id="81"><a class="l" href="#81">  81 </a>
</span><span class="l" id="82"><a class="l" href="#82">  82 </a>    <span class="php-comment">// --------- Table Attributes</span>
</span><span class="l" id="83"><a class="l" href="#83">  83 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$caption" id="$caption">$caption</a></span>;
</span><span class="l" id="84"><a class="l" href="#84">  84 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$tableAttributes" id="$tableAttributes">$tableAttributes</a></span>;
</span><span class="l" id="85"><a class="l" href="#85">  85 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$tableColumnGroups" id="$tableColumnGroups">$tableColumnGroups</a></span>;
</span><span class="l" id="86"><a class="l" href="#86">  86 </a>
</span><span class="l" id="87"><a class="l" href="#87">  87 </a>    <span class="php-comment">// --------- Link Attributes</span>
</span><span class="l" id="88"><a class="l" href="#88">  88 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$linkAttributes" id="$linkAttributes">$linkAttributes</a></span>;
</span><span class="l" id="89"><a class="l" href="#89">  89 </a>
</span><span class="l" id="90"><a class="l" href="#90">  90 </a>    <span class="php-comment">// --------- Pagination Attributes</span>
</span><span class="l" id="91"><a class="l" href="#91">  91 </a>    <span class="php-keyword1">private</span> <span class="php-var"><a href="#$pager" id="$pager">$pager</a></span>;
</span><span class="l" id="92"><a class="l" href="#92">  92 </a>
</span><span class="l" id="93"><a class="l" href="#93">  93 </a>    <span class="php-comment">/**
</span></span><span class="l" id="94"><a class="l" href="#94">  94 </a><span class="php-comment">     * Erstellt ein rex_list Objekt.
</span></span><span class="l" id="95"><a class="l" href="#95">  95 </a><span class="php-comment">     *
</span></span><span class="l" id="96"><a class="l" href="#96">  96 </a><span class="php-comment">     * @param string $query       SELECT Statement
</span></span><span class="l" id="97"><a class="l" href="#97">  97 </a><span class="php-comment">     * @param int    $rowsPerPage Anzahl der Elemente pro Zeile
</span></span><span class="l" id="98"><a class="l" href="#98">  98 </a><span class="php-comment">     * @param string $listName    Name der Liste
</span></span><span class="l" id="99"><a class="l" href="#99">  99 </a><span class="php-comment">     * @param bool   $debug
</span></span><span class="l" id="100"><a class="l" href="#100"> 100 </a><span class="php-comment">     */</span>
</span><span class="l" id="101"><a class="l" href="#101"> 101 </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a href="#___construct" id="___construct">__construct</a>(<span class="php-var">$query</span>, <span class="php-var">$rowsPerPage</span> = <span class="php-num">30</span>, <span class="php-var">$listName</span> = <span class="php-keyword1">null</span>, <span class="php-var">$debug</span> = <span class="php-keyword1">false</span>)
</span><span class="l" id="102"><a class="l" href="#102"> 102 </a>    {
</span><span class="l" id="103"><a class="l" href="#103"> 103 </a>        <span class="php-comment">// --------- Validation</span>
</span><span class="l" id="104"><a class="l" href="#104"> 104 </a>        <span class="php-keyword1">if</span> (!<span class="php-var">$listName</span>) {
</span><span class="l" id="105"><a class="l" href="#105"> 105 </a>            <span class="php-comment">// use a hopefully unique (per page) hash</span>
</span><span class="l" id="106"><a class="l" href="#106"> 106 </a>            <span class="php-var">$listName</span> = <span class="php-keyword2">substr</span>(<span class="php-keyword2">md5</span>(<span class="php-var">$query</span>), <span class="php-num">0</span>, <span class="php-num">8</span>);
</span><span class="l" id="107"><a class="l" href="#107"> 107 </a>        }
</span><span class="l" id="108"><a class="l" href="#108"> 108 </a>
</span><span class="l" id="109"><a class="l" href="#109"> 109 </a>        <span class="php-comment">// --------- List Attributes</span>
</span><span class="l" id="110"><a class="l" href="#110"> 110 </a>        <span class="php-var">$this</span>-&gt;query = <span class="php-var">$query</span>;
</span><span class="l" id="111"><a class="l" href="#111"> 111 </a>        <span class="php-var">$this</span>-&gt;sql = rex_sql::factory();
</span><span class="l" id="112"><a class="l" href="#112"> 112 </a>        <span class="php-var">$this</span>-&gt;debug = <span class="php-var">$debug</span>;
</span><span class="l" id="113"><a class="l" href="#113"> 113 </a>        <span class="php-var">$this</span>-&gt;sql-&gt;setDebug(<span class="php-var">$this</span>-&gt;debug);
</span><span class="l" id="114"><a class="l" href="#114"> 114 </a>        <span class="php-var">$this</span>-&gt;name = <span class="php-var">$listName</span>;
</span><span class="l" id="115"><a class="l" href="#115"> 115 </a>        <span class="php-var">$this</span>-&gt;caption = <span class="php-quote">''</span>;
</span><span class="l" id="116"><a class="l" href="#116"> 116 </a>        <span class="php-var">$this</span>-&gt;rows = <span class="php-num">0</span>;
</span><span class="l" id="117"><a class="l" href="#117"> 117 </a>        <span class="php-var">$this</span>-&gt;params = [];
</span><span class="l" id="118"><a class="l" href="#118"> 118 </a>        <span class="php-var">$this</span>-&gt;tableAttributes = [];
</span><span class="l" id="119"><a class="l" href="#119"> 119 </a>        <span class="php-var">$this</span>-&gt;noRowsMessage = rex_i18n::msg(<span class="php-quote">'list_no_rows'</span>);
</span><span class="l" id="120"><a class="l" href="#120"> 120 </a>
</span><span class="l" id="121"><a class="l" href="#121"> 121 </a>        <span class="php-comment">// --------- Form Attributes</span>
</span><span class="l" id="122"><a class="l" href="#122"> 122 </a>        <span class="php-var">$this</span>-&gt;formAttributes = [];
</span><span class="l" id="123"><a class="l" href="#123"> 123 </a>
</span><span class="l" id="124"><a class="l" href="#124"> 124 </a>        <span class="php-comment">// --------- Column Attributes</span>
</span><span class="l" id="125"><a class="l" href="#125"> 125 </a>        <span class="php-var">$this</span>-&gt;customColumns = [];
</span><span class="l" id="126"><a class="l" href="#126"> 126 </a>        <span class="php-var">$this</span>-&gt;columnLabels = [];
</span><span class="l" id="127"><a class="l" href="#127"> 127 </a>        <span class="php-var">$this</span>-&gt;columnFormates = [];
</span><span class="l" id="128"><a class="l" href="#128"> 128 </a>        <span class="php-var">$this</span>-&gt;columnParams = [];
</span><span class="l" id="129"><a class="l" href="#129"> 129 </a>        <span class="php-var">$this</span>-&gt;columnOptions = [];
</span><span class="l" id="130"><a class="l" href="#130"> 130 </a>        <span class="php-var">$this</span>-&gt;columnAttributes = [];
</span><span class="l" id="131"><a class="l" href="#131"> 131 </a>        <span class="php-var">$this</span>-&gt;columnLayouts = [];
</span><span class="l" id="132"><a class="l" href="#132"> 132 </a>        <span class="php-var">$this</span>-&gt;columnDisabled = [];
</span><span class="l" id="133"><a class="l" href="#133"> 133 </a>
</span><span class="l" id="134"><a class="l" href="#134"> 134 </a>        <span class="php-comment">// --------- Default</span>
</span><span class="l" id="135"><a class="l" href="#135"> 135 </a>        <span class="php-var">$this</span>-&gt;defaultColumnLayout = [<span class="php-quote">'&lt;th&gt;###VALUE###&lt;/th&gt;'</span>, <span class="php-quote">'&lt;td data-title="###LABEL###"&gt;###VALUE###&lt;/td&gt;'</span>];
</span><span class="l" id="136"><a class="l" href="#136"> 136 </a>
</span><span class="l" id="137"><a class="l" href="#137"> 137 </a>        <span class="php-comment">// --------- Table Attributes</span>
</span><span class="l" id="138"><a class="l" href="#138"> 138 </a>        <span class="php-var">$this</span>-&gt;tableAttributes = [];
</span><span class="l" id="139"><a class="l" href="#139"> 139 </a>        <span class="php-var">$this</span>-&gt;tableColumnGroups = [];
</span><span class="l" id="140"><a class="l" href="#140"> 140 </a>
</span><span class="l" id="141"><a class="l" href="#141"> 141 </a>        <span class="php-comment">// --------- Link Attributes</span>
</span><span class="l" id="142"><a class="l" href="#142"> 142 </a>        <span class="php-var">$this</span>-&gt;linkAttributes = [];
</span><span class="l" id="143"><a class="l" href="#143"> 143 </a>
</span><span class="l" id="144"><a class="l" href="#144"> 144 </a>        <span class="php-comment">// --------- Pagination Attributes</span>
</span><span class="l" id="145"><a class="l" href="#145"> 145 </a>        <span class="php-var">$cursorName</span> = <span class="php-var">$listName</span> .<span class="php-quote">'_start'</span>;
</span><span class="l" id="146"><a class="l" href="#146"> 146 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword1">null</span> === rex_request(<span class="php-var">$cursorName</span>, <span class="php-quote">'int'</span>, <span class="php-keyword1">null</span>) &amp;&amp; rex_request(<span class="php-quote">'start'</span>, <span class="php-quote">'int'</span>)) {
</span><span class="l" id="147"><a class="l" href="#147"> 147 </a>            <span class="php-comment">// BC: Fallback to "start"</span>
</span><span class="l" id="148"><a class="l" href="#148"> 148 </a>            <span class="php-var">$cursorName</span> = <span class="php-quote">'start'</span>;
</span><span class="l" id="149"><a class="l" href="#149"> 149 </a>        }
</span><span class="l" id="150"><a class="l" href="#150"> 150 </a>        <span class="php-var">$this</span>-&gt;pager = <span class="php-keyword1">new</span> rex_pager(<span class="php-var">$rowsPerPage</span>, <span class="php-var">$cursorName</span>);
</span><span class="l" id="151"><a class="l" href="#151"> 151 </a>
</span><span class="l" id="152"><a class="l" href="#152"> 152 </a>        <span class="php-comment">// --------- Load Data, Row-Count</span>
</span><span class="l" id="153"><a class="l" href="#153"> 153 </a>        <span class="php-var">$this</span>-&gt;sql-&gt;setQuery(<span class="php-var">$this</span>-&gt;prepareQuery(<span class="php-var">$query</span>));
</span><span class="l" id="154"><a class="l" href="#154"> 154 </a>        <span class="php-var">$sql</span> = rex_sql::factory();
</span><span class="l" id="155"><a class="l" href="#155"> 155 </a>        <span class="php-var">$sql</span>-&gt;setQuery(<span class="php-quote">'SELECT FOUND_ROWS() as '</span>. <span class="php-var">$sql</span>-&gt;escapeIdentifier(<span class="php-quote">'rows'</span>));
</span><span class="l" id="156"><a class="l" href="#156"> 156 </a>        <span class="php-var">$this</span>-&gt;rows = <span class="php-var">$sql</span>-&gt;getValue(<span class="php-quote">'rows'</span>);
</span><span class="l" id="157"><a class="l" href="#157"> 157 </a>        <span class="php-var">$this</span>-&gt;pager-&gt;setRowCount(<span class="php-var">$this</span>-&gt;rows);
</span><span class="l" id="158"><a class="l" href="#158"> 158 </a>
</span><span class="l" id="159"><a class="l" href="#159"> 159 </a>        <span class="php-keyword1">foreach</span> (<span class="php-var">$this</span>-&gt;sql-&gt;getFieldnames() <span class="php-keyword1">as</span> <span class="php-var">$columnName</span>) {
</span><span class="l" id="160"><a class="l" href="#160"> 160 </a>            <span class="php-var">$this</span>-&gt;columnNames[] = <span class="php-var">$columnName</span>;
</span><span class="l" id="161"><a class="l" href="#161"> 161 </a>        }
</span><span class="l" id="162"><a class="l" href="#162"> 162 </a>
</span><span class="l" id="163"><a class="l" href="#163"> 163 </a>        <span class="php-comment">// --------- Load Env</span>
</span><span class="l" id="164"><a class="l" href="#164"> 164 </a>        <span class="php-keyword1">if</span> (rex::isBackend()) {
</span><span class="l" id="165"><a class="l" href="#165"> 165 </a>            <span class="php-var">$this</span>-&gt;loadBackendConfig();
</span><span class="l" id="166"><a class="l" href="#166"> 166 </a>        }
</span><span class="l" id="167"><a class="l" href="#167"> 167 </a>
</span><span class="l" id="168"><a class="l" href="#168"> 168 </a>        <span class="php-var">$this</span>-&gt;init();
</span><span class="l" id="169"><a class="l" href="#169"> 169 </a>    }
</span><span class="l" id="170"><a class="l" href="#170"> 170 </a>
</span><span class="l" id="171"><a class="l" href="#171"> 171 </a>    <span class="php-comment">/**
</span></span><span class="l" id="172"><a class="l" href="#172"> 172 </a><span class="php-comment">     * @param string $query
</span></span><span class="l" id="173"><a class="l" href="#173"> 173 </a><span class="php-comment">     * @param int    $rowsPerPage
</span></span><span class="l" id="174"><a class="l" href="#174"> 174 </a><span class="php-comment">     * @param null   $listName
</span></span><span class="l" id="175"><a class="l" href="#175"> 175 </a><span class="php-comment">     * @param bool   $debug
</span></span><span class="l" id="176"><a class="l" href="#176"> 176 </a><span class="php-comment">     *
</span></span><span class="l" id="177"><a class="l" href="#177"> 177 </a><span class="php-comment">     * @return static
</span></span><span class="l" id="178"><a class="l" href="#178"> 178 </a><span class="php-comment">     */</span>
</span><span class="l" id="179"><a class="l" href="#179"> 179 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">static</span> <span class="php-keyword1">function</span> <a href="#_factory" id="_factory">factory</a>(<span class="php-var">$query</span>, <span class="php-var">$rowsPerPage</span> = <span class="php-num">30</span>, <span class="php-var">$listName</span> = <span class="php-keyword1">null</span>, <span class="php-var">$debug</span> = <span class="php-keyword1">false</span>)
</span><span class="l" id="180"><a class="l" href="#180"> 180 </a>    {
</span><span class="l" id="181"><a class="l" href="#181"> 181 </a>        <span class="php-var">$class</span> = <span class="php-keyword1">static</span>::getFactoryClass();
</span><span class="l" id="182"><a class="l" href="#182"> 182 </a>        <span class="php-keyword1">return</span> <span class="php-keyword1">new</span> <span class="php-var">$class</span>(<span class="php-var">$query</span>, <span class="php-var">$rowsPerPage</span>, <span class="php-var">$listName</span>, <span class="php-var">$debug</span>);
</span><span class="l" id="183"><a class="l" href="#183"> 183 </a>    }
</span><span class="l" id="184"><a class="l" href="#184"> 184 </a>
</span><span class="l" id="185"><a class="l" href="#185"> 185 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_init" id="_init">init</a>()
</span><span class="l" id="186"><a class="l" href="#186"> 186 </a>    {
</span><span class="l" id="187"><a class="l" href="#187"> 187 </a>        <span class="php-comment">// nichts tun</span>
</span><span class="l" id="188"><a class="l" href="#188"> 188 </a>    }
</span><span class="l" id="189"><a class="l" href="#189"> 189 </a>
</span><span class="l" id="190"><a class="l" href="#190"> 190 </a>    <span class="php-comment">// ---------------------- setters/getters</span>
</span><span class="l" id="191"><a class="l" href="#191"> 191 </a>
</span><span class="l" id="192"><a class="l" href="#192"> 192 </a>    <span class="php-comment">/**
</span></span><span class="l" id="193"><a class="l" href="#193"> 193 </a><span class="php-comment">     * Gibt den Namen es Formulars zurück.
</span></span><span class="l" id="194"><a class="l" href="#194"> 194 </a><span class="php-comment">     *
</span></span><span class="l" id="195"><a class="l" href="#195"> 195 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="196"><a class="l" href="#196"> 196 </a><span class="php-comment">     */</span>
</span><span class="l" id="197"><a class="l" href="#197"> 197 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getName" id="_getName">getName</a>()
</span><span class="l" id="198"><a class="l" href="#198"> 198 </a>    {
</span><span class="l" id="199"><a class="l" href="#199"> 199 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;name;
</span><span class="l" id="200"><a class="l" href="#200"> 200 </a>    }
</span><span class="l" id="201"><a class="l" href="#201"> 201 </a>
</span><span class="l" id="202"><a class="l" href="#202"> 202 </a>    <span class="php-comment">/**
</span></span><span class="l" id="203"><a class="l" href="#203"> 203 </a><span class="php-comment">     * Gibt eine Status Nachricht zurück.
</span></span><span class="l" id="204"><a class="l" href="#204"> 204 </a><span class="php-comment">     *
</span></span><span class="l" id="205"><a class="l" href="#205"> 205 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="206"><a class="l" href="#206"> 206 </a><span class="php-comment">     */</span>
</span><span class="l" id="207"><a class="l" href="#207"> 207 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getMessage" id="_getMessage">getMessage</a>()
</span><span class="l" id="208"><a class="l" href="#208"> 208 </a>    {
</span><span class="l" id="209"><a class="l" href="#209"> 209 </a>        <span class="php-keyword1">return</span> rex_escape(rex_request(<span class="php-var">$this</span>-&gt;getName() . <span class="php-quote">'_msg'</span>, <span class="php-quote">'string'</span>));
</span><span class="l" id="210"><a class="l" href="#210"> 210 </a>    }
</span><span class="l" id="211"><a class="l" href="#211"> 211 </a>
</span><span class="l" id="212"><a class="l" href="#212"> 212 </a>    <span class="php-comment">/**
</span></span><span class="l" id="213"><a class="l" href="#213"> 213 </a><span class="php-comment">     * Gibt eine Warnung zurück.
</span></span><span class="l" id="214"><a class="l" href="#214"> 214 </a><span class="php-comment">     *
</span></span><span class="l" id="215"><a class="l" href="#215"> 215 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="216"><a class="l" href="#216"> 216 </a><span class="php-comment">     */</span>
</span><span class="l" id="217"><a class="l" href="#217"> 217 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getWarning" id="_getWarning">getWarning</a>()
</span><span class="l" id="218"><a class="l" href="#218"> 218 </a>    {
</span><span class="l" id="219"><a class="l" href="#219"> 219 </a>        <span class="php-keyword1">return</span> rex_escape(rex_request(<span class="php-var">$this</span>-&gt;getName() . <span class="php-quote">'_warning'</span>, <span class="php-quote">'string'</span>));
</span><span class="l" id="220"><a class="l" href="#220"> 220 </a>    }
</span><span class="l" id="221"><a class="l" href="#221"> 221 </a>
</span><span class="l" id="222"><a class="l" href="#222"> 222 </a>    <span class="php-comment">/**
</span></span><span class="l" id="223"><a class="l" href="#223"> 223 </a><span class="php-comment">     * Setzt die Caption/den Titel der Tabelle
</span></span><span class="l" id="224"><a class="l" href="#224"> 224 </a><span class="php-comment">     * Gibt den Namen es Formulars zurück.
</span></span><span class="l" id="225"><a class="l" href="#225"> 225 </a><span class="php-comment">     *
</span></span><span class="l" id="226"><a class="l" href="#226"> 226 </a><span class="php-comment">     * @param string $caption Caption/Titel der Tabelle
</span></span><span class="l" id="227"><a class="l" href="#227"> 227 </a><span class="php-comment">     */</span>
</span><span class="l" id="228"><a class="l" href="#228"> 228 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_setCaption" id="_setCaption">setCaption</a>(<span class="php-var">$caption</span>)
</span><span class="l" id="229"><a class="l" href="#229"> 229 </a>    {
</span><span class="l" id="230"><a class="l" href="#230"> 230 </a>        <span class="php-var">$this</span>-&gt;caption = <span class="php-var">$caption</span>;
</span><span class="l" id="231"><a class="l" href="#231"> 231 </a>    }
</span><span class="l" id="232"><a class="l" href="#232"> 232 </a>
</span><span class="l" id="233"><a class="l" href="#233"> 233 </a>    <span class="php-comment">/**
</span></span><span class="l" id="234"><a class="l" href="#234"> 234 </a><span class="php-comment">     * Gibt die Caption/den Titel der Tabelle zurück.
</span></span><span class="l" id="235"><a class="l" href="#235"> 235 </a><span class="php-comment">     *
</span></span><span class="l" id="236"><a class="l" href="#236"> 236 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="237"><a class="l" href="#237"> 237 </a><span class="php-comment">     */</span>
</span><span class="l" id="238"><a class="l" href="#238"> 238 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getCaption" id="_getCaption">getCaption</a>()
</span><span class="l" id="239"><a class="l" href="#239"> 239 </a>    {
</span><span class="l" id="240"><a class="l" href="#240"> 240 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;caption;
</span><span class="l" id="241"><a class="l" href="#241"> 241 </a>    }
</span><span class="l" id="242"><a class="l" href="#242"> 242 </a>
</span><span class="l" id="243"><a class="l" href="#243"> 243 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_setNoRowsMessage" id="_setNoRowsMessage">setNoRowsMessage</a>(<span class="php-var">$msg</span>)
</span><span class="l" id="244"><a class="l" href="#244"> 244 </a>    {
</span><span class="l" id="245"><a class="l" href="#245"> 245 </a>        <span class="php-var">$this</span>-&gt;noRowsMessage = <span class="php-var">$msg</span>;
</span><span class="l" id="246"><a class="l" href="#246"> 246 </a>    }
</span><span class="l" id="247"><a class="l" href="#247"> 247 </a>
</span><span class="l" id="248"><a class="l" href="#248"> 248 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getNoRowsMessage" id="_getNoRowsMessage">getNoRowsMessage</a>()
</span><span class="l" id="249"><a class="l" href="#249"> 249 </a>    {
</span><span class="l" id="250"><a class="l" href="#250"> 250 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;noRowsMessage;
</span><span class="l" id="251"><a class="l" href="#251"> 251 </a>    }
</span><span class="l" id="252"><a class="l" href="#252"> 252 </a>
</span><span class="l" id="253"><a class="l" href="#253"> 253 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_addParam" id="_addParam">addParam</a>(<span class="php-var">$name</span>, <span class="php-var">$value</span>)
</span><span class="l" id="254"><a class="l" href="#254"> 254 </a>    {
</span><span class="l" id="255"><a class="l" href="#255"> 255 </a>        <span class="php-var">$this</span>-&gt;params[<span class="php-var">$name</span>] = <span class="php-var">$value</span>;
</span><span class="l" id="256"><a class="l" href="#256"> 256 </a>    }
</span><span class="l" id="257"><a class="l" href="#257"> 257 </a>
</span><span class="l" id="258"><a class="l" href="#258"> 258 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getParams" id="_getParams">getParams</a>()
</span><span class="l" id="259"><a class="l" href="#259"> 259 </a>    {
</span><span class="l" id="260"><a class="l" href="#260"> 260 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;params;
</span><span class="l" id="261"><a class="l" href="#261"> 261 </a>    }
</span><span class="l" id="262"><a class="l" href="#262"> 262 </a>
</span><span class="l" id="263"><a class="l" href="#263"> 263 </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a href="#_loadBackendConfig" id="_loadBackendConfig">loadBackendConfig</a>()
</span><span class="l" id="264"><a class="l" href="#264"> 264 </a>    {
</span><span class="l" id="265"><a class="l" href="#265"> 265 </a>        <span class="php-var">$this</span>-&gt;addParam(<span class="php-quote">'page'</span>, rex_be_controller::getCurrentPage());
</span><span class="l" id="266"><a class="l" href="#266"> 266 </a>    }
</span><span class="l" id="267"><a class="l" href="#267"> 267 </a>
</span><span class="l" id="268"><a class="l" href="#268"> 268 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_addTableAttribute" id="_addTableAttribute">addTableAttribute</a>(<span class="php-var">$attrName</span>, <span class="php-var">$attrValue</span>)
</span><span class="l" id="269"><a class="l" href="#269"> 269 </a>    {
</span><span class="l" id="270"><a class="l" href="#270"> 270 </a>        <span class="php-var">$this</span>-&gt;tableAttributes[<span class="php-var">$attrName</span>] = <span class="php-var">$attrValue</span>;
</span><span class="l" id="271"><a class="l" href="#271"> 271 </a>    }
</span><span class="l" id="272"><a class="l" href="#272"> 272 </a>
</span><span class="l" id="273"><a class="l" href="#273"> 273 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getTableAttributes" id="_getTableAttributes">getTableAttributes</a>()
</span><span class="l" id="274"><a class="l" href="#274"> 274 </a>    {
</span><span class="l" id="275"><a class="l" href="#275"> 275 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;tableAttributes;
</span><span class="l" id="276"><a class="l" href="#276"> 276 </a>    }
</span><span class="l" id="277"><a class="l" href="#277"> 277 </a>
</span><span class="l" id="278"><a class="l" href="#278"> 278 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_addFormAttribute" id="_addFormAttribute">addFormAttribute</a>(<span class="php-var">$attrName</span>, <span class="php-var">$attrValue</span>)
</span><span class="l" id="279"><a class="l" href="#279"> 279 </a>    {
</span><span class="l" id="280"><a class="l" href="#280"> 280 </a>        <span class="php-var">$this</span>-&gt;formAttributes[<span class="php-var">$attrName</span>] = <span class="php-var">$attrValue</span>;
</span><span class="l" id="281"><a class="l" href="#281"> 281 </a>    }
</span><span class="l" id="282"><a class="l" href="#282"> 282 </a>
</span><span class="l" id="283"><a class="l" href="#283"> 283 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getFormAttributes" id="_getFormAttributes">getFormAttributes</a>()
</span><span class="l" id="284"><a class="l" href="#284"> 284 </a>    {
</span><span class="l" id="285"><a class="l" href="#285"> 285 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;formAttributes;
</span><span class="l" id="286"><a class="l" href="#286"> 286 </a>    }
</span><span class="l" id="287"><a class="l" href="#287"> 287 </a>
</span><span class="l" id="288"><a class="l" href="#288"> 288 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_addLinkAttribute" id="_addLinkAttribute">addLinkAttribute</a>(<span class="php-var">$columnName</span>, <span class="php-var">$attrName</span>, <span class="php-var">$attrValue</span>)
</span><span class="l" id="289"><a class="l" href="#289"> 289 </a>    {
</span><span class="l" id="290"><a class="l" href="#290"> 290 </a>        <span class="php-var">$this</span>-&gt;linkAttributes[<span class="php-var">$columnName</span>][<span class="php-var">$attrName</span>] = <span class="php-var">$attrValue</span>;
</span><span class="l" id="291"><a class="l" href="#291"> 291 </a>    }
</span><span class="l" id="292"><a class="l" href="#292"> 292 </a>
</span><span class="l" id="293"><a class="l" href="#293"> 293 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getLinkAttributes" id="_getLinkAttributes">getLinkAttributes</a>(<span class="php-var">$column</span>, <span class="php-var">$default</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="294"><a class="l" href="#294"> 294 </a>    {
</span><span class="l" id="295"><a class="l" href="#295"> 295 </a>        <span class="php-keyword1">return</span> <span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;linkAttributes[<span class="php-var">$column</span>]) ? <span class="php-var">$this</span>-&gt;linkAttributes[<span class="php-var">$column</span>] : <span class="php-var">$default</span>;
</span><span class="l" id="296"><a class="l" href="#296"> 296 </a>    }
</span><span class="l" id="297"><a class="l" href="#297"> 297 </a>
</span><span class="l" id="298"><a class="l" href="#298"> 298 </a>    <span class="php-comment">// ---------------------- Column setters/getters/etc</span>
</span><span class="l" id="299"><a class="l" href="#299"> 299 </a>
</span><span class="l" id="300"><a class="l" href="#300"> 300 </a>    <span class="php-comment">/**
</span></span><span class="l" id="301"><a class="l" href="#301"> 301 </a><span class="php-comment">     * Methode, um eine Spalte einzufügen.
</span></span><span class="l" id="302"><a class="l" href="#302"> 302 </a><span class="php-comment">     *
</span></span><span class="l" id="303"><a class="l" href="#303"> 303 </a><span class="php-comment">     * @param string $columnHead   Titel der Spalte
</span></span><span class="l" id="304"><a class="l" href="#304"> 304 </a><span class="php-comment">     * @param string $columnBody   Text/Format der Spalte
</span></span><span class="l" id="305"><a class="l" href="#305"> 305 </a><span class="php-comment">     * @param int    $columnIndex  Stelle, an der die neue Spalte erscheinen soll
</span></span><span class="l" id="306"><a class="l" href="#306"> 306 </a><span class="php-comment">     * @param array  $columnLayout Layout der Spalte
</span></span><span class="l" id="307"><a class="l" href="#307"> 307 </a><span class="php-comment">     */</span>
</span><span class="l" id="308"><a class="l" href="#308"> 308 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_addColumn" id="_addColumn">addColumn</a>(<span class="php-var">$columnHead</span>, <span class="php-var">$columnBody</span>, <span class="php-var">$columnIndex</span> = -<span class="php-num">1</span>, <span class="php-var">$columnLayout</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="309"><a class="l" href="#309"> 309 </a>    {
</span><span class="l" id="310"><a class="l" href="#310"> 310 </a>        <span class="php-comment">// Bei negativem columnIndex, das Element am Ende anfügen</span>
</span><span class="l" id="311"><a class="l" href="#311"> 311 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$columnIndex</span> &lt; <span class="php-num">0</span>) {
</span><span class="l" id="312"><a class="l" href="#312"> 312 </a>            <span class="php-var">$columnIndex</span> = <span class="php-keyword2">count</span>(<span class="php-var">$this</span>-&gt;columnNames);
</span><span class="l" id="313"><a class="l" href="#313"> 313 </a>        }
</span><span class="l" id="314"><a class="l" href="#314"> 314 </a>
</span><span class="l" id="315"><a class="l" href="#315"> 315 </a>        <span class="php-keyword2">array_splice</span>(<span class="php-var">$this</span>-&gt;columnNames, <span class="php-var">$columnIndex</span>, <span class="php-num">0</span>, [<span class="php-var">$columnHead</span>]);
</span><span class="l" id="316"><a class="l" href="#316"> 316 </a>        <span class="php-var">$this</span>-&gt;customColumns[<span class="php-var">$columnHead</span>] = <span class="php-var">$columnBody</span>;
</span><span class="l" id="317"><a class="l" href="#317"> 317 </a>        <span class="php-var">$this</span>-&gt;setColumnLayout(<span class="php-var">$columnHead</span>, <span class="php-var">$columnLayout</span>);
</span><span class="l" id="318"><a class="l" href="#318"> 318 </a>    }
</span><span class="l" id="319"><a class="l" href="#319"> 319 </a>
</span><span class="l" id="320"><a class="l" href="#320"> 320 </a>    <span class="php-comment">/**
</span></span><span class="l" id="321"><a class="l" href="#321"> 321 </a><span class="php-comment">     * Entfernt eine Spalte aus der Anzeige.
</span></span><span class="l" id="322"><a class="l" href="#322"> 322 </a><span class="php-comment">     *
</span></span><span class="l" id="323"><a class="l" href="#323"> 323 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="324"><a class="l" href="#324"> 324 </a><span class="php-comment">     */</span>
</span><span class="l" id="325"><a class="l" href="#325"> 325 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_removeColumn" id="_removeColumn">removeColumn</a>(<span class="php-var">$columnName</span>)
</span><span class="l" id="326"><a class="l" href="#326"> 326 </a>    {
</span><span class="l" id="327"><a class="l" href="#327"> 327 </a>        <span class="php-var">$this</span>-&gt;columnDisabled[] = <span class="php-var">$columnName</span>;
</span><span class="l" id="328"><a class="l" href="#328"> 328 </a>    }
</span><span class="l" id="329"><a class="l" href="#329"> 329 </a>
</span><span class="l" id="330"><a class="l" href="#330"> 330 </a>    <span class="php-comment">/**
</span></span><span class="l" id="331"><a class="l" href="#331"> 331 </a><span class="php-comment">     * Methode, um das Layout einer Spalte zu setzen.
</span></span><span class="l" id="332"><a class="l" href="#332"> 332 </a><span class="php-comment">     *
</span></span><span class="l" id="333"><a class="l" href="#333"> 333 </a><span class="php-comment">     * @param string $columnHead   Titel der Spalte
</span></span><span class="l" id="334"><a class="l" href="#334"> 334 </a><span class="php-comment">     * @param array  $columnLayout Layout der Spalte
</span></span><span class="l" id="335"><a class="l" href="#335"> 335 </a><span class="php-comment">     */</span>
</span><span class="l" id="336"><a class="l" href="#336"> 336 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_setColumnLayout" id="_setColumnLayout">setColumnLayout</a>(<span class="php-var">$columnHead</span>, <span class="php-var">$columnLayout</span>)
</span><span class="l" id="337"><a class="l" href="#337"> 337 </a>    {
</span><span class="l" id="338"><a class="l" href="#338"> 338 </a>        <span class="php-var">$this</span>-&gt;columnLayouts[<span class="php-var">$columnHead</span>] = <span class="php-var">$columnLayout</span>;
</span><span class="l" id="339"><a class="l" href="#339"> 339 </a>    }
</span><span class="l" id="340"><a class="l" href="#340"> 340 </a>
</span><span class="l" id="341"><a class="l" href="#341"> 341 </a>    <span class="php-comment">/**
</span></span><span class="l" id="342"><a class="l" href="#342"> 342 </a><span class="php-comment">     * Gibt das Layout einer Spalte zurück.
</span></span><span class="l" id="343"><a class="l" href="#343"> 343 </a><span class="php-comment">     *
</span></span><span class="l" id="344"><a class="l" href="#344"> 344 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="345"><a class="l" href="#345"> 345 </a><span class="php-comment">     *
</span></span><span class="l" id="346"><a class="l" href="#346"> 346 </a><span class="php-comment">     * @return array
</span></span><span class="l" id="347"><a class="l" href="#347"> 347 </a><span class="php-comment">     */</span>
</span><span class="l" id="348"><a class="l" href="#348"> 348 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnLayout" id="_getColumnLayout">getColumnLayout</a>(<span class="php-var">$columnName</span>)
</span><span class="l" id="349"><a class="l" href="#349"> 349 </a>    {
</span><span class="l" id="350"><a class="l" href="#350"> 350 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;columnLayouts[<span class="php-var">$columnName</span>]) &amp;&amp; <span class="php-keyword2">is_array</span>(<span class="php-var">$this</span>-&gt;columnLayouts[<span class="php-var">$columnName</span>])) {
</span><span class="l" id="351"><a class="l" href="#351"> 351 </a>            <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;columnLayouts[<span class="php-var">$columnName</span>];
</span><span class="l" id="352"><a class="l" href="#352"> 352 </a>        }
</span><span class="l" id="353"><a class="l" href="#353"> 353 </a>
</span><span class="l" id="354"><a class="l" href="#354"> 354 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;defaultColumnLayout;
</span><span class="l" id="355"><a class="l" href="#355"> 355 </a>    }
</span><span class="l" id="356"><a class="l" href="#356"> 356 </a>
</span><span class="l" id="357"><a class="l" href="#357"> 357 </a>    <span class="php-comment">/**
</span></span><span class="l" id="358"><a class="l" href="#358"> 358 </a><span class="php-comment">     * Gibt die Layouts aller Spalten zurück.
</span></span><span class="l" id="359"><a class="l" href="#359"> 359 </a><span class="php-comment">     */</span>
</span><span class="l" id="360"><a class="l" href="#360"> 360 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnLayouts" id="_getColumnLayouts">getColumnLayouts</a>()
</span><span class="l" id="361"><a class="l" href="#361"> 361 </a>    {
</span><span class="l" id="362"><a class="l" href="#362"> 362 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;columnLayouts;
</span><span class="l" id="363"><a class="l" href="#363"> 363 </a>    }
</span><span class="l" id="364"><a class="l" href="#364"> 364 </a>
</span><span class="l" id="365"><a class="l" href="#365"> 365 </a>    <span class="php-comment">/**
</span></span><span class="l" id="366"><a class="l" href="#366"> 366 </a><span class="php-comment">     * Gibt den Namen einer Spalte zurück.
</span></span><span class="l" id="367"><a class="l" href="#367"> 367 </a><span class="php-comment">     *
</span></span><span class="l" id="368"><a class="l" href="#368"> 368 </a><span class="php-comment">     * @param int   $columnIndex Nummer der Spalte
</span></span><span class="l" id="369"><a class="l" href="#369"> 369 </a><span class="php-comment">     * @param mixed $default     Defaultrückgabewert, falls keine Spalte mit der angegebenen Nummer vorhanden ist
</span></span><span class="l" id="370"><a class="l" href="#370"> 370 </a><span class="php-comment">     *
</span></span><span class="l" id="371"><a class="l" href="#371"> 371 </a><span class="php-comment">     * @return string|null
</span></span><span class="l" id="372"><a class="l" href="#372"> 372 </a><span class="php-comment">     */</span>
</span><span class="l" id="373"><a class="l" href="#373"> 373 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnName" id="_getColumnName">getColumnName</a>(<span class="php-var">$columnIndex</span>, <span class="php-var">$default</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="374"><a class="l" href="#374"> 374 </a>    {
</span><span class="l" id="375"><a class="l" href="#375"> 375 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;columnNames[<span class="php-var">$columnIndex</span>])) {
</span><span class="l" id="376"><a class="l" href="#376"> 376 </a>            <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;columnNames[<span class="php-var">$columnIndex</span>];
</span><span class="l" id="377"><a class="l" href="#377"> 377 </a>        }
</span><span class="l" id="378"><a class="l" href="#378"> 378 </a>
</span><span class="l" id="379"><a class="l" href="#379"> 379 </a>        <span class="php-keyword1">return</span> <span class="php-var">$default</span>;
</span><span class="l" id="380"><a class="l" href="#380"> 380 </a>    }
</span><span class="l" id="381"><a class="l" href="#381"> 381 </a>
</span><span class="l" id="382"><a class="l" href="#382"> 382 </a>    <span class="php-comment">/**
</span></span><span class="l" id="383"><a class="l" href="#383"> 383 </a><span class="php-comment">     * Gibt alle Namen der Spalten als Array zurück.
</span></span><span class="l" id="384"><a class="l" href="#384"> 384 </a><span class="php-comment">     *
</span></span><span class="l" id="385"><a class="l" href="#385"> 385 </a><span class="php-comment">     * @return array
</span></span><span class="l" id="386"><a class="l" href="#386"> 386 </a><span class="php-comment">     */</span>
</span><span class="l" id="387"><a class="l" href="#387"> 387 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnNames" id="_getColumnNames">getColumnNames</a>()
</span><span class="l" id="388"><a class="l" href="#388"> 388 </a>    {
</span><span class="l" id="389"><a class="l" href="#389"> 389 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;columnNames;
</span><span class="l" id="390"><a class="l" href="#390"> 390 </a>    }
</span><span class="l" id="391"><a class="l" href="#391"> 391 </a>
</span><span class="l" id="392"><a class="l" href="#392"> 392 </a>    <span class="php-comment">/**
</span></span><span class="l" id="393"><a class="l" href="#393"> 393 </a><span class="php-comment">     * Setzt ein Label für eine Spalte.
</span></span><span class="l" id="394"><a class="l" href="#394"> 394 </a><span class="php-comment">     *
</span></span><span class="l" id="395"><a class="l" href="#395"> 395 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="396"><a class="l" href="#396"> 396 </a><span class="php-comment">     * @param string $label      Label für die Spalte
</span></span><span class="l" id="397"><a class="l" href="#397"> 397 </a><span class="php-comment">     */</span>
</span><span class="l" id="398"><a class="l" href="#398"> 398 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_setColumnLabel" id="_setColumnLabel">setColumnLabel</a>(<span class="php-var">$columnName</span>, <span class="php-var">$label</span>)
</span><span class="l" id="399"><a class="l" href="#399"> 399 </a>    {
</span><span class="l" id="400"><a class="l" href="#400"> 400 </a>        <span class="php-var">$this</span>-&gt;columnLabels[<span class="php-var">$columnName</span>] = <span class="php-var">$label</span>;
</span><span class="l" id="401"><a class="l" href="#401"> 401 </a>    }
</span><span class="l" id="402"><a class="l" href="#402"> 402 </a>
</span><span class="l" id="403"><a class="l" href="#403"> 403 </a>    <span class="php-comment">/**
</span></span><span class="l" id="404"><a class="l" href="#404"> 404 </a><span class="php-comment">     * Gibt das Label der Spalte zurück, falls gesetzt.
</span></span><span class="l" id="405"><a class="l" href="#405"> 405 </a><span class="php-comment">     *
</span></span><span class="l" id="406"><a class="l" href="#406"> 406 </a><span class="php-comment">     * Falls nicht vorhanden und der Parameter $default auf null steht,
</span></span><span class="l" id="407"><a class="l" href="#407"> 407 </a><span class="php-comment">     * wird der Spaltenname zurückgegeben
</span></span><span class="l" id="408"><a class="l" href="#408"> 408 </a><span class="php-comment">     *
</span></span><span class="l" id="409"><a class="l" href="#409"> 409 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="410"><a class="l" href="#410"> 410 </a><span class="php-comment">     * @param mixed  $default    Defaultrückgabewert, falls kein Label gesetzt ist
</span></span><span class="l" id="411"><a class="l" href="#411"> 411 </a><span class="php-comment">     *
</span></span><span class="l" id="412"><a class="l" href="#412"> 412 </a><span class="php-comment">     * @return string|null
</span></span><span class="l" id="413"><a class="l" href="#413"> 413 </a><span class="php-comment">     */</span>
</span><span class="l" id="414"><a class="l" href="#414"> 414 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnLabel" id="_getColumnLabel">getColumnLabel</a>(<span class="php-var">$columnName</span>, <span class="php-var">$default</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="415"><a class="l" href="#415"> 415 </a>    {
</span><span class="l" id="416"><a class="l" href="#416"> 416 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;columnLabels[<span class="php-var">$columnName</span>])) {
</span><span class="l" id="417"><a class="l" href="#417"> 417 </a>            <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;columnLabels[<span class="php-var">$columnName</span>];
</span><span class="l" id="418"><a class="l" href="#418"> 418 </a>        }
</span><span class="l" id="419"><a class="l" href="#419"> 419 </a>
</span><span class="l" id="420"><a class="l" href="#420"> 420 </a>        <span class="php-keyword1">return</span> <span class="php-var">$default</span> === <span class="php-keyword1">null</span> ? <span class="php-var">$columnName</span> : <span class="php-var">$default</span>;
</span><span class="l" id="421"><a class="l" href="#421"> 421 </a>    }
</span><span class="l" id="422"><a class="l" href="#422"> 422 </a>
</span><span class="l" id="423"><a class="l" href="#423"> 423 </a>    <span class="php-comment">/**
</span></span><span class="l" id="424"><a class="l" href="#424"> 424 </a><span class="php-comment">     * Setzt ein Format für die Spalte.
</span></span><span class="l" id="425"><a class="l" href="#425"> 425 </a><span class="php-comment">     *
</span></span><span class="l" id="426"><a class="l" href="#426"> 426 </a><span class="php-comment">     * @param string $columnName  Name der Spalte
</span></span><span class="l" id="427"><a class="l" href="#427"> 427 </a><span class="php-comment">     * @param string $format_type Formatierungstyp
</span></span><span class="l" id="428"><a class="l" href="#428"> 428 </a><span class="php-comment">     * @param mixed  $format      Zu verwendentes Format
</span></span><span class="l" id="429"><a class="l" href="#429"> 429 </a><span class="php-comment">     * @param array  $params      Custom params für callback func bei format_type 'custom'
</span></span><span class="l" id="430"><a class="l" href="#430"> 430 </a><span class="php-comment">     */</span>
</span><span class="l" id="431"><a class="l" href="#431"> 431 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_setColumnFormat" id="_setColumnFormat">setColumnFormat</a>(<span class="php-var">$columnName</span>, <span class="php-var">$format_type</span>, <span class="php-var">$format</span> = <span class="php-quote">''</span>, <span class="php-keyword1">array</span> <span class="php-var">$params</span> = [])
</span><span class="l" id="432"><a class="l" href="#432"> 432 </a>    {
</span><span class="l" id="433"><a class="l" href="#433"> 433 </a>        <span class="php-var">$this</span>-&gt;columnFormates[<span class="php-var">$columnName</span>] = [<span class="php-var">$format_type</span>, <span class="php-var">$format</span>, <span class="php-var">$params</span>];
</span><span class="l" id="434"><a class="l" href="#434"> 434 </a>    }
</span><span class="l" id="435"><a class="l" href="#435"> 435 </a>
</span><span class="l" id="436"><a class="l" href="#436"> 436 </a>    <span class="php-comment">/**
</span></span><span class="l" id="437"><a class="l" href="#437"> 437 </a><span class="php-comment">     * Gibt das Format für eine Spalte zurück.
</span></span><span class="l" id="438"><a class="l" href="#438"> 438 </a><span class="php-comment">     *
</span></span><span class="l" id="439"><a class="l" href="#439"> 439 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="440"><a class="l" href="#440"> 440 </a><span class="php-comment">     * @param mixed  $default    Defaultrückgabewert, falls keine Formatierung gesetzt ist
</span></span><span class="l" id="441"><a class="l" href="#441"> 441 </a><span class="php-comment">     *
</span></span><span class="l" id="442"><a class="l" href="#442"> 442 </a><span class="php-comment">     * @return string|null
</span></span><span class="l" id="443"><a class="l" href="#443"> 443 </a><span class="php-comment">     */</span>
</span><span class="l" id="444"><a class="l" href="#444"> 444 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnFormat" id="_getColumnFormat">getColumnFormat</a>(<span class="php-var">$columnName</span>, <span class="php-var">$default</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="445"><a class="l" href="#445"> 445 </a>    {
</span><span class="l" id="446"><a class="l" href="#446"> 446 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;columnFormates[<span class="php-var">$columnName</span>])) {
</span><span class="l" id="447"><a class="l" href="#447"> 447 </a>            <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;columnFormates[<span class="php-var">$columnName</span>];
</span><span class="l" id="448"><a class="l" href="#448"> 448 </a>        }
</span><span class="l" id="449"><a class="l" href="#449"> 449 </a>
</span><span class="l" id="450"><a class="l" href="#450"> 450 </a>        <span class="php-keyword1">return</span> <span class="php-var">$default</span>;
</span><span class="l" id="451"><a class="l" href="#451"> 451 </a>    }
</span><span class="l" id="452"><a class="l" href="#452"> 452 </a>
</span><span class="l" id="453"><a class="l" href="#453"> 453 </a>    <span class="php-comment">/**
</span></span><span class="l" id="454"><a class="l" href="#454"> 454 </a><span class="php-comment">     * Markiert eine Spalte als sortierbar.
</span></span><span class="l" id="455"><a class="l" href="#455"> 455 </a><span class="php-comment">     *
</span></span><span class="l" id="456"><a class="l" href="#456"> 456 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="457"><a class="l" href="#457"> 457 </a><span class="php-comment">     * @param string $direction  Startsortierrichtung der Spalte [ASC|DESC]
</span></span><span class="l" id="458"><a class="l" href="#458"> 458 </a><span class="php-comment">     */</span>
</span><span class="l" id="459"><a class="l" href="#459"> 459 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_setColumnSortable" id="_setColumnSortable">setColumnSortable</a>(<span class="php-var">$columnName</span>, <span class="php-var">$direction</span> = <span class="php-quote">'asc'</span>)
</span><span class="l" id="460"><a class="l" href="#460"> 460 </a>    {
</span><span class="l" id="461"><a class="l" href="#461"> 461 </a>        <span class="php-var">$this</span>-&gt;setColumnOption(<span class="php-var">$columnName</span>, REX_LIST_OPT_SORT, <span class="php-keyword1">true</span>);
</span><span class="l" id="462"><a class="l" href="#462"> 462 </a>        <span class="php-var">$this</span>-&gt;setColumnOption(<span class="php-var">$columnName</span>, REX_LIST_OPT_SORT_DIRECTION, <span class="php-keyword2">strtolower</span>(<span class="php-var">$direction</span>));
</span><span class="l" id="463"><a class="l" href="#463"> 463 </a>    }
</span><span class="l" id="464"><a class="l" href="#464"> 464 </a>
</span><span class="l" id="465"><a class="l" href="#465"> 465 </a>    <span class="php-comment">/**
</span></span><span class="l" id="466"><a class="l" href="#466"> 466 </a><span class="php-comment">     * Setzt eine Option für eine Spalte
</span></span><span class="l" id="467"><a class="l" href="#467"> 467 </a><span class="php-comment">     * (z.b. Sortable,..).
</span></span><span class="l" id="468"><a class="l" href="#468"> 468 </a><span class="php-comment">     *
</span></span><span class="l" id="469"><a class="l" href="#469"> 469 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="470"><a class="l" href="#470"> 470 </a><span class="php-comment">     * @param string $option     Name/Id der Option
</span></span><span class="l" id="471"><a class="l" href="#471"> 471 </a><span class="php-comment">     * @param mixed  $value      Wert der Option
</span></span><span class="l" id="472"><a class="l" href="#472"> 472 </a><span class="php-comment">     */</span>
</span><span class="l" id="473"><a class="l" href="#473"> 473 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_setColumnOption" id="_setColumnOption">setColumnOption</a>(<span class="php-var">$columnName</span>, <span class="php-var">$option</span>, <span class="php-var">$value</span>)
</span><span class="l" id="474"><a class="l" href="#474"> 474 </a>    {
</span><span class="l" id="475"><a class="l" href="#475"> 475 </a>        <span class="php-var">$this</span>-&gt;columnOptions[<span class="php-var">$columnName</span>][<span class="php-var">$option</span>] = <span class="php-var">$value</span>;
</span><span class="l" id="476"><a class="l" href="#476"> 476 </a>    }
</span><span class="l" id="477"><a class="l" href="#477"> 477 </a>
</span><span class="l" id="478"><a class="l" href="#478"> 478 </a>    <span class="php-comment">/**
</span></span><span class="l" id="479"><a class="l" href="#479"> 479 </a><span class="php-comment">     * Gibt den Wert einer Option für eine Spalte zurück.
</span></span><span class="l" id="480"><a class="l" href="#480"> 480 </a><span class="php-comment">     *
</span></span><span class="l" id="481"><a class="l" href="#481"> 481 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="482"><a class="l" href="#482"> 482 </a><span class="php-comment">     * @param string $option     Name/Id der Option
</span></span><span class="l" id="483"><a class="l" href="#483"> 483 </a><span class="php-comment">     * @param mixed  $default    Defaultrückgabewert, falls die Option nicht gesetzt ist
</span></span><span class="l" id="484"><a class="l" href="#484"> 484 </a><span class="php-comment">     *
</span></span><span class="l" id="485"><a class="l" href="#485"> 485 </a><span class="php-comment">     * @return mixed|null
</span></span><span class="l" id="486"><a class="l" href="#486"> 486 </a><span class="php-comment">     */</span>
</span><span class="l" id="487"><a class="l" href="#487"> 487 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnOption" id="_getColumnOption">getColumnOption</a>(<span class="php-var">$columnName</span>, <span class="php-var">$option</span>, <span class="php-var">$default</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="488"><a class="l" href="#488"> 488 </a>    {
</span><span class="l" id="489"><a class="l" href="#489"> 489 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$this</span>-&gt;hasColumnOption(<span class="php-var">$columnName</span>, <span class="php-var">$option</span>)) {
</span><span class="l" id="490"><a class="l" href="#490"> 490 </a>            <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;columnOptions[<span class="php-var">$columnName</span>][<span class="php-var">$option</span>];
</span><span class="l" id="491"><a class="l" href="#491"> 491 </a>        }
</span><span class="l" id="492"><a class="l" href="#492"> 492 </a>        <span class="php-keyword1">return</span> <span class="php-var">$default</span>;
</span><span class="l" id="493"><a class="l" href="#493"> 493 </a>    }
</span><span class="l" id="494"><a class="l" href="#494"> 494 </a>
</span><span class="l" id="495"><a class="l" href="#495"> 495 </a>    <span class="php-comment">/**
</span></span><span class="l" id="496"><a class="l" href="#496"> 496 </a><span class="php-comment">     * Gibt zurück, ob für eine Spalte eine Option gesetzt wurde.
</span></span><span class="l" id="497"><a class="l" href="#497"> 497 </a><span class="php-comment">     *
</span></span><span class="l" id="498"><a class="l" href="#498"> 498 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="499"><a class="l" href="#499"> 499 </a><span class="php-comment">     * @param string $option     Name/Id der Option
</span></span><span class="l" id="500"><a class="l" href="#500"> 500 </a><span class="php-comment">     *
</span></span><span class="l" id="501"><a class="l" href="#501"> 501 </a><span class="php-comment">     * @return bool
</span></span><span class="l" id="502"><a class="l" href="#502"> 502 </a><span class="php-comment">     */</span>
</span><span class="l" id="503"><a class="l" href="#503"> 503 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_hasColumnOption" id="_hasColumnOption">hasColumnOption</a>(<span class="php-var">$columnName</span>, <span class="php-var">$option</span>)
</span><span class="l" id="504"><a class="l" href="#504"> 504 </a>    {
</span><span class="l" id="505"><a class="l" href="#505"> 505 </a>        <span class="php-keyword1">return</span> <span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;columnOptions[<span class="php-var">$columnName</span>][<span class="php-var">$option</span>]);
</span><span class="l" id="506"><a class="l" href="#506"> 506 </a>    }
</span><span class="l" id="507"><a class="l" href="#507"> 507 </a>
</span><span class="l" id="508"><a class="l" href="#508"> 508 </a>    <span class="php-comment">/**
</span></span><span class="l" id="509"><a class="l" href="#509"> 509 </a><span class="php-comment">     * Verlinkt eine Spalte mit den übergebenen Parametern.
</span></span><span class="l" id="510"><a class="l" href="#510"> 510 </a><span class="php-comment">     *
</span></span><span class="l" id="511"><a class="l" href="#511"> 511 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="512"><a class="l" href="#512"> 512 </a><span class="php-comment">     * @param array  $params     Array von Parametern
</span></span><span class="l" id="513"><a class="l" href="#513"> 513 </a><span class="php-comment">     */</span>
</span><span class="l" id="514"><a class="l" href="#514"> 514 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_setColumnParams" id="_setColumnParams">setColumnParams</a>(<span class="php-var">$columnName</span>, <span class="php-keyword1">array</span> <span class="php-var">$params</span> = [])
</span><span class="l" id="515"><a class="l" href="#515"> 515 </a>    {
</span><span class="l" id="516"><a class="l" href="#516"> 516 </a>        <span class="php-var">$this</span>-&gt;columnParams[<span class="php-var">$columnName</span>] = <span class="php-var">$params</span>;
</span><span class="l" id="517"><a class="l" href="#517"> 517 </a>    }
</span><span class="l" id="518"><a class="l" href="#518"> 518 </a>
</span><span class="l" id="519"><a class="l" href="#519"> 519 </a>    <span class="php-comment">/**
</span></span><span class="l" id="520"><a class="l" href="#520"> 520 </a><span class="php-comment">     * Gibt die Parameter für eine Spalte zurück.
</span></span><span class="l" id="521"><a class="l" href="#521"> 521 </a><span class="php-comment">     *
</span></span><span class="l" id="522"><a class="l" href="#522"> 522 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="523"><a class="l" href="#523"> 523 </a><span class="php-comment">     *
</span></span><span class="l" id="524"><a class="l" href="#524"> 524 </a><span class="php-comment">     * @return array
</span></span><span class="l" id="525"><a class="l" href="#525"> 525 </a><span class="php-comment">     */</span>
</span><span class="l" id="526"><a class="l" href="#526"> 526 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnParams" id="_getColumnParams">getColumnParams</a>(<span class="php-var">$columnName</span>)
</span><span class="l" id="527"><a class="l" href="#527"> 527 </a>    {
</span><span class="l" id="528"><a class="l" href="#528"> 528 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;columnParams[<span class="php-var">$columnName</span>]) &amp;&amp; <span class="php-keyword2">is_array</span>(<span class="php-var">$this</span>-&gt;columnParams[<span class="php-var">$columnName</span>])) {
</span><span class="l" id="529"><a class="l" href="#529"> 529 </a>            <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;columnParams[<span class="php-var">$columnName</span>];
</span><span class="l" id="530"><a class="l" href="#530"> 530 </a>        }
</span><span class="l" id="531"><a class="l" href="#531"> 531 </a>        <span class="php-keyword1">return</span> [];
</span><span class="l" id="532"><a class="l" href="#532"> 532 </a>    }
</span><span class="l" id="533"><a class="l" href="#533"> 533 </a>
</span><span class="l" id="534"><a class="l" href="#534"> 534 </a>    <span class="php-comment">/**
</span></span><span class="l" id="535"><a class="l" href="#535"> 535 </a><span class="php-comment">     * Gibt zurück, ob Parameter für eine Spalte existieren.
</span></span><span class="l" id="536"><a class="l" href="#536"> 536 </a><span class="php-comment">     *
</span></span><span class="l" id="537"><a class="l" href="#537"> 537 </a><span class="php-comment">     * @param string $columnName Name der Spalte
</span></span><span class="l" id="538"><a class="l" href="#538"> 538 </a><span class="php-comment">     *
</span></span><span class="l" id="539"><a class="l" href="#539"> 539 </a><span class="php-comment">     * @return bool
</span></span><span class="l" id="540"><a class="l" href="#540"> 540 </a><span class="php-comment">     */</span>
</span><span class="l" id="541"><a class="l" href="#541"> 541 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_hasColumnParams" id="_hasColumnParams">hasColumnParams</a>(<span class="php-var">$columnName</span>)
</span><span class="l" id="542"><a class="l" href="#542"> 542 </a>    {
</span><span class="l" id="543"><a class="l" href="#543"> 543 </a>        <span class="php-keyword1">return</span> <span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;columnParams[<span class="php-var">$columnName</span>]) &amp;&amp; <span class="php-keyword2">is_array</span>(<span class="php-var">$this</span>-&gt;columnParams[<span class="php-var">$columnName</span>]) &amp;&amp; <span class="php-keyword2">count</span>(<span class="php-var">$this</span>-&gt;columnParams[<span class="php-var">$columnName</span>]) &gt; <span class="php-num">0</span>;
</span><span class="l" id="544"><a class="l" href="#544"> 544 </a>    }
</span><span class="l" id="545"><a class="l" href="#545"> 545 </a>
</span><span class="l" id="546"><a class="l" href="#546"> 546 </a>    <span class="php-comment">// ---------------------- TableColumnGroup setters/getters/etc</span>
</span><span class="l" id="547"><a class="l" href="#547"> 547 </a>
</span><span class="l" id="548"><a class="l" href="#548"> 548 </a>    <span class="php-comment">/**
</span></span><span class="l" id="549"><a class="l" href="#549"> 549 </a><span class="php-comment">     * Methode um eine Colgroup einzufügen.
</span></span><span class="l" id="550"><a class="l" href="#550"> 550 </a><span class="php-comment">     *
</span></span><span class="l" id="551"><a class="l" href="#551"> 551 </a><span class="php-comment">     * Beispiel 1:
</span></span><span class="l" id="552"><a class="l" href="#552"> 552 </a><span class="php-comment">     *
</span></span><span class="l" id="553"><a class="l" href="#553"> 553 </a><span class="php-comment">     * $list-&gt;addTableColumnGroup([40, '*', 240, 140]);
</span></span><span class="l" id="554"><a class="l" href="#554"> 554 </a><span class="php-comment">     *
</span></span><span class="l" id="555"><a class="l" href="#555"> 555 </a><span class="php-comment">     * Beispiel 2:
</span></span><span class="l" id="556"><a class="l" href="#556"> 556 </a><span class="php-comment">     *
</span></span><span class="l" id="557"><a class="l" href="#557"> 557 </a><span class="php-comment">     * $list-&gt;addTableColumnGroup([
</span></span><span class="l" id="558"><a class="l" href="#558"> 558 </a><span class="php-comment">     *     ['width' =&gt; 40],
</span></span><span class="l" id="559"><a class="l" href="#559"> 559 </a><span class="php-comment">     *     ['width' =&gt; 140, 'span' =&gt; 2],
</span></span><span class="l" id="560"><a class="l" href="#560"> 560 </a><span class="php-comment">     *     ['width' =&gt; 240]
</span></span><span class="l" id="561"><a class="l" href="#561"> 561 </a><span class="php-comment">     * ]);
</span></span><span class="l" id="562"><a class="l" href="#562"> 562 </a><span class="php-comment">     *
</span></span><span class="l" id="563"><a class="l" href="#563"> 563 </a><span class="php-comment">     * Beispiel 3:
</span></span><span class="l" id="564"><a class="l" href="#564"> 564 </a><span class="php-comment">     *
</span></span><span class="l" id="565"><a class="l" href="#565"> 565 </a><span class="php-comment">     * $list-&gt;addTableColumnGroup([
</span></span><span class="l" id="566"><a class="l" href="#566"> 566 </a><span class="php-comment">     *     ['class' =&gt; 'classname-a'],
</span></span><span class="l" id="567"><a class="l" href="#567"> 567 </a><span class="php-comment">     *     ['class' =&gt; 'classname-b'],
</span></span><span class="l" id="568"><a class="l" href="#568"> 568 </a><span class="php-comment">     *     ['class' =&gt; 'classname-c']
</span></span><span class="l" id="569"><a class="l" href="#569"> 569 </a><span class="php-comment">     * ]);
</span></span><span class="l" id="570"><a class="l" href="#570"> 570 </a><span class="php-comment">     *
</span></span><span class="l" id="571"><a class="l" href="#571"> 571 </a><span class="php-comment">     * @param array $columns         Array von Spalten
</span></span><span class="l" id="572"><a class="l" href="#572"> 572 </a><span class="php-comment">     * @param int   $columnGroupSpan Span der Columngroup
</span></span><span class="l" id="573"><a class="l" href="#573"> 573 </a><span class="php-comment">     */</span>
</span><span class="l" id="574"><a class="l" href="#574"> 574 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_addTableColumnGroup" id="_addTableColumnGroup">addTableColumnGroup</a>(<span class="php-keyword1">array</span> <span class="php-var">$columns</span>, <span class="php-var">$columnGroupSpan</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="575"><a class="l" href="#575"> 575 </a>    {
</span><span class="l" id="576"><a class="l" href="#576"> 576 </a>        <span class="php-var">$tableColumnGroup</span> = [<span class="php-quote">'columns'</span> =&gt; []];
</span><span class="l" id="577"><a class="l" href="#577"> 577 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$columnGroupSpan</span>) {
</span><span class="l" id="578"><a class="l" href="#578"> 578 </a>            <span class="php-var">$tableColumnGroup</span>[<span class="php-quote">'span'</span>] = <span class="php-var">$columnGroupSpan</span>;
</span><span class="l" id="579"><a class="l" href="#579"> 579 </a>        }
</span><span class="l" id="580"><a class="l" href="#580"> 580 </a>        <span class="php-var">$this</span>-&gt;tableColumnGroups[] = <span class="php-var">$tableColumnGroup</span>;
</span><span class="l" id="581"><a class="l" href="#581"> 581 </a>
</span><span class="l" id="582"><a class="l" href="#582"> 582 </a>        <span class="php-keyword1">foreach</span> (<span class="php-var">$columns</span> <span class="php-keyword1">as</span> <span class="php-var">$column</span>) {
</span><span class="l" id="583"><a class="l" href="#583"> 583 </a>            <span class="php-keyword1">if</span> (<span class="php-keyword2">is_array</span>(<span class="php-var">$column</span>)) {
</span><span class="l" id="584"><a class="l" href="#584"> 584 </a>                <span class="php-var">$this</span>-&gt;addTableColumn(<span class="php-keyword1">isset</span>(<span class="php-var">$column</span>[<span class="php-quote">'width'</span>]) ? <span class="php-var">$column</span>[<span class="php-quote">'width'</span>] : <span class="php-keyword1">null</span>, <span class="php-keyword1">isset</span>(<span class="php-var">$column</span>[<span class="php-quote">'span'</span>]) ? <span class="php-var">$column</span>[<span class="php-quote">'span'</span>] : <span class="php-keyword1">null</span>, <span class="php-keyword1">isset</span>(<span class="php-var">$column</span>[<span class="php-quote">'class'</span>]) ? <span class="php-var">$column</span>[<span class="php-quote">'class'</span>] : <span class="php-keyword1">null</span>);
</span><span class="l" id="585"><a class="l" href="#585"> 585 </a>            } <span class="php-keyword1">else</span> {
</span><span class="l" id="586"><a class="l" href="#586"> 586 </a>                <span class="php-var">$this</span>-&gt;addTableColumn(<span class="php-var">$column</span>);
</span><span class="l" id="587"><a class="l" href="#587"> 587 </a>            }
</span><span class="l" id="588"><a class="l" href="#588"> 588 </a>        }
</span><span class="l" id="589"><a class="l" href="#589"> 589 </a>    }
</span><span class="l" id="590"><a class="l" href="#590"> 590 </a>
</span><span class="l" id="591"><a class="l" href="#591"> 591 </a>    <span class="php-comment">/**
</span></span><span class="l" id="592"><a class="l" href="#592"> 592 </a><span class="php-comment">     * @return array
</span></span><span class="l" id="593"><a class="l" href="#593"> 593 </a><span class="php-comment">     */</span>
</span><span class="l" id="594"><a class="l" href="#594"> 594 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getTableColumnGroups" id="_getTableColumnGroups">getTableColumnGroups</a>()
</span><span class="l" id="595"><a class="l" href="#595"> 595 </a>    {
</span><span class="l" id="596"><a class="l" href="#596"> 596 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;tableColumnGroups;
</span><span class="l" id="597"><a class="l" href="#597"> 597 </a>    }
</span><span class="l" id="598"><a class="l" href="#598"> 598 </a>
</span><span class="l" id="599"><a class="l" href="#599"> 599 </a>    <span class="php-comment">/**
</span></span><span class="l" id="600"><a class="l" href="#600"> 600 </a><span class="php-comment">     * Fügt der zuletzte eingefügten TableColumnGroup eine weitere Spalte hinzu.
</span></span><span class="l" id="601"><a class="l" href="#601"> 601 </a><span class="php-comment">     *
</span></span><span class="l" id="602"><a class="l" href="#602"> 602 </a><span class="php-comment">     * @param int $width Breite der Spalte
</span></span><span class="l" id="603"><a class="l" href="#603"> 603 </a><span class="php-comment">     * @param int $span  Span der Spalte
</span></span><span class="l" id="604"><a class="l" href="#604"> 604 </a><span class="php-comment">     */</span>
</span><span class="l" id="605"><a class="l" href="#605"> 605 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_addTableColumn" id="_addTableColumn">addTableColumn</a>(<span class="php-var">$width</span>, <span class="php-var">$span</span> = <span class="php-keyword1">null</span>, <span class="php-var">$class</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="606"><a class="l" href="#606"> 606 </a>    {
</span><span class="l" id="607"><a class="l" href="#607"> 607 </a>        <span class="php-var">$tableColumn</span> = [];
</span><span class="l" id="608"><a class="l" href="#608"> 608 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword2">is_numeric</span>(<span class="php-var">$width</span>)) {
</span><span class="l" id="609"><a class="l" href="#609"> 609 </a>            <span class="php-var">$width</span> = <span class="php-var">$width</span> . <span class="php-quote">'px'</span>;
</span><span class="l" id="610"><a class="l" href="#610"> 610 </a>        }
</span><span class="l" id="611"><a class="l" href="#611"> 611 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$width</span> &amp;&amp; <span class="php-quote">'*'</span> != <span class="php-var">$width</span>) {
</span><span class="l" id="612"><a class="l" href="#612"> 612 </a>            <span class="php-var">$tableColumn</span>[<span class="php-quote">'style'</span>] = <span class="php-quote">'width:'</span> . <span class="php-var">$width</span>;
</span><span class="l" id="613"><a class="l" href="#613"> 613 </a>        }
</span><span class="l" id="614"><a class="l" href="#614"> 614 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$span</span>) {
</span><span class="l" id="615"><a class="l" href="#615"> 615 </a>            <span class="php-var">$tableColumn</span>[<span class="php-quote">'span'</span>] = <span class="php-var">$span</span>;
</span><span class="l" id="616"><a class="l" href="#616"> 616 </a>        }
</span><span class="l" id="617"><a class="l" href="#617"> 617 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$class</span>) {
</span><span class="l" id="618"><a class="l" href="#618"> 618 </a>            <span class="php-var">$tableColumn</span>[<span class="php-quote">'class'</span>] = <span class="php-var">$class</span>;
</span><span class="l" id="619"><a class="l" href="#619"> 619 </a>        }
</span><span class="l" id="620"><a class="l" href="#620"> 620 </a>
</span><span class="l" id="621"><a class="l" href="#621"> 621 </a>        <span class="php-var">$lastIndex</span> = <span class="php-keyword2">count</span>(<span class="php-var">$this</span>-&gt;tableColumnGroups) - <span class="php-num">1</span>;
</span><span class="l" id="622"><a class="l" href="#622"> 622 </a>
</span><span class="l" id="623"><a class="l" href="#623"> 623 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$lastIndex</span> &lt; <span class="php-num">0</span>) {
</span><span class="l" id="624"><a class="l" href="#624"> 624 </a>            <span class="php-comment">// Falls noch keine TableColumnGroup vorhanden, eine leere anlegen!</span>
</span><span class="l" id="625"><a class="l" href="#625"> 625 </a>            <span class="php-var">$this</span>-&gt;addTableColumnGroup([]);
</span><span class="l" id="626"><a class="l" href="#626"> 626 </a>            ++<span class="php-var">$lastIndex</span>;
</span><span class="l" id="627"><a class="l" href="#627"> 627 </a>        }
</span><span class="l" id="628"><a class="l" href="#628"> 628 </a>
</span><span class="l" id="629"><a class="l" href="#629"> 629 </a>        <span class="php-var">$groupColumns</span> = <span class="php-var">$this</span>-&gt;tableColumnGroups[<span class="php-var">$lastIndex</span>][<span class="php-quote">'columns'</span>];
</span><span class="l" id="630"><a class="l" href="#630"> 630 </a>        <span class="php-var">$groupColumns</span>[] = <span class="php-var">$tableColumn</span>;
</span><span class="l" id="631"><a class="l" href="#631"> 631 </a>        <span class="php-var">$this</span>-&gt;tableColumnGroups[<span class="php-var">$lastIndex</span>][<span class="php-quote">'columns'</span>] = <span class="php-var">$groupColumns</span>;
</span><span class="l" id="632"><a class="l" href="#632"> 632 </a>    }
</span><span class="l" id="633"><a class="l" href="#633"> 633 </a>
</span><span class="l" id="634"><a class="l" href="#634"> 634 </a>    <span class="php-comment">// ---------------------- Url generation</span>
</span><span class="l" id="635"><a class="l" href="#635"> 635 </a>
</span><span class="l" id="636"><a class="l" href="#636"> 636 </a>    <span class="php-comment">/**
</span></span><span class="l" id="637"><a class="l" href="#637"> 637 </a><span class="php-comment">     * {@inheritdoc}
</span></span><span class="l" id="638"><a class="l" href="#638"> 638 </a><span class="php-comment">     */</span>
</span><span class="l" id="639"><a class="l" href="#639"> 639 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getUrl" id="_getUrl">getUrl</a>(<span class="php-keyword1">array</span> <span class="php-var">$params</span> = [], <span class="php-var">$escape</span> = <span class="php-keyword1">true</span>)
</span><span class="l" id="640"><a class="l" href="#640"> 640 </a>    {
</span><span class="l" id="641"><a class="l" href="#641"> 641 </a>        <span class="php-var">$params</span> = <span class="php-keyword2">array_merge</span>(<span class="php-var">$this</span>-&gt;getParams(), <span class="php-var">$params</span>);
</span><span class="l" id="642"><a class="l" href="#642"> 642 </a>
</span><span class="l" id="643"><a class="l" href="#643"> 643 </a>        <span class="php-var">$params</span>[<span class="php-quote">'list'</span>] = <span class="php-var">$this</span>-&gt;getName();
</span><span class="l" id="644"><a class="l" href="#644"> 644 </a>
</span><span class="l" id="645"><a class="l" href="#645"> 645 </a>        <span class="php-keyword1">if</span> (!<span class="php-keyword1">isset</span>(<span class="php-var">$params</span>[<span class="php-quote">'sort'</span>])) {
</span><span class="l" id="646"><a class="l" href="#646"> 646 </a>            <span class="php-var">$sortColumn</span> = <span class="php-var">$this</span>-&gt;getSortColumn();
</span><span class="l" id="647"><a class="l" href="#647"> 647 </a>            <span class="php-keyword1">if</span> (<span class="php-var">$sortColumn</span> != <span class="php-keyword1">null</span>) {
</span><span class="l" id="648"><a class="l" href="#648"> 648 </a>                <span class="php-var">$params</span>[<span class="php-quote">'sort'</span>] = <span class="php-var">$sortColumn</span>;
</span><span class="l" id="649"><a class="l" href="#649"> 649 </a>                <span class="php-var">$params</span>[<span class="php-quote">'sorttype'</span>] = <span class="php-var">$this</span>-&gt;getSortType();
</span><span class="l" id="650"><a class="l" href="#650"> 650 </a>            }
</span><span class="l" id="651"><a class="l" href="#651"> 651 </a>        }
</span><span class="l" id="652"><a class="l" href="#652"> 652 </a>
</span><span class="l" id="653"><a class="l" href="#653"> 653 </a>        <span class="php-var">$_params</span> = [];
</span><span class="l" id="654"><a class="l" href="#654"> 654 </a>        <span class="php-keyword1">foreach</span> (<span class="php-var">$params</span> <span class="php-keyword1">as</span> <span class="php-var">$name</span> =&gt; <span class="php-var">$value</span>) {
</span><span class="l" id="655"><a class="l" href="#655"> 655 </a>            <span class="php-keyword1">if</span> (<span class="php-keyword2">is_array</span>(<span class="php-var">$value</span>)) {
</span><span class="l" id="656"><a class="l" href="#656"> 656 </a>                <span class="php-keyword1">foreach</span> (<span class="php-var">$value</span> <span class="php-keyword1">as</span> <span class="php-var">$v</span>) {
</span><span class="l" id="657"><a class="l" href="#657"> 657 </a>                    <span class="php-var">$_params</span>[<span class="php-var">$name</span>] = <span class="php-var">$v</span>;
</span><span class="l" id="658"><a class="l" href="#658"> 658 </a>                }
</span><span class="l" id="659"><a class="l" href="#659"> 659 </a>            } <span class="php-keyword1">else</span> {
</span><span class="l" id="660"><a class="l" href="#660"> 660 </a>                <span class="php-var">$_params</span>[<span class="php-var">$name</span>] = <span class="php-var">$value</span>;
</span><span class="l" id="661"><a class="l" href="#661"> 661 </a>            }
</span><span class="l" id="662"><a class="l" href="#662"> 662 </a>        }
</span><span class="l" id="663"><a class="l" href="#663"> 663 </a>
</span><span class="l" id="664"><a class="l" href="#664"> 664 </a>        <span class="php-keyword1">return</span> rex::isBackend() ? rex_url::backendController(<span class="php-var">$_params</span>, <span class="php-var">$escape</span>) : rex_url::frontendController(<span class="php-var">$_params</span>, <span class="php-var">$escape</span>);
</span><span class="l" id="665"><a class="l" href="#665"> 665 </a>    }
</span><span class="l" id="666"><a class="l" href="#666"> 666 </a>
</span><span class="l" id="667"><a class="l" href="#667"> 667 </a>    <span class="php-comment">/**
</span></span><span class="l" id="668"><a class="l" href="#668"> 668 </a><span class="php-comment">     * Gibt eine Url zurück, die die Parameter $params enthält
</span></span><span class="l" id="669"><a class="l" href="#669"> 669 </a><span class="php-comment">     * Dieser Url werden die Standard rexList Variablen zugefügt.
</span></span><span class="l" id="670"><a class="l" href="#670"> 670 </a><span class="php-comment">     *
</span></span><span class="l" id="671"><a class="l" href="#671"> 671 </a><span class="php-comment">     * Innerhalb dieser Url werden variablen ersetzt
</span></span><span class="l" id="672"><a class="l" href="#672"> 672 </a><span class="php-comment">     *
</span></span><span class="l" id="673"><a class="l" href="#673"> 673 </a><span class="php-comment">     * @see #replaceVariable, #replaceVariables
</span></span><span class="l" id="674"><a class="l" href="#674"> 674 </a><span class="php-comment">     *
</span></span><span class="l" id="675"><a class="l" href="#675"> 675 </a><span class="php-comment">     * @param array $params
</span></span><span class="l" id="676"><a class="l" href="#676"> 676 </a><span class="php-comment">     * @param bool  $escape Flag whether the argument separator "&amp;" should be escaped (&amp;amp;)
</span></span><span class="l" id="677"><a class="l" href="#677"> 677 </a><span class="php-comment">     *
</span></span><span class="l" id="678"><a class="l" href="#678"> 678 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="679"><a class="l" href="#679"> 679 </a><span class="php-comment">     */</span>
</span><span class="l" id="680"><a class="l" href="#680"> 680 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getParsedUrl" id="_getParsedUrl">getParsedUrl</a>(<span class="php-var">$params</span> = [], <span class="php-var">$escape</span> = <span class="php-keyword1">true</span>)
</span><span class="l" id="681"><a class="l" href="#681"> 681 </a>    {
</span><span class="l" id="682"><a class="l" href="#682"> 682 </a>        <span class="php-var">$params</span> = <span class="php-keyword2">array_merge</span>(<span class="php-var">$this</span>-&gt;getParams(), <span class="php-var">$params</span>);
</span><span class="l" id="683"><a class="l" href="#683"> 683 </a>
</span><span class="l" id="684"><a class="l" href="#684"> 684 </a>        <span class="php-var">$params</span>[<span class="php-quote">'list'</span>] = <span class="php-var">$this</span>-&gt;getName();
</span><span class="l" id="685"><a class="l" href="#685"> 685 </a>
</span><span class="l" id="686"><a class="l" href="#686"> 686 </a>        <span class="php-keyword1">if</span> (!<span class="php-keyword1">isset</span>(<span class="php-var">$params</span>[<span class="php-quote">'sort'</span>])) {
</span><span class="l" id="687"><a class="l" href="#687"> 687 </a>            <span class="php-var">$sortColumn</span> = <span class="php-var">$this</span>-&gt;getSortColumn();
</span><span class="l" id="688"><a class="l" href="#688"> 688 </a>            <span class="php-keyword1">if</span> (<span class="php-var">$sortColumn</span> != <span class="php-keyword1">null</span>) {
</span><span class="l" id="689"><a class="l" href="#689"> 689 </a>                <span class="php-var">$params</span>[<span class="php-quote">'sort'</span>] = <span class="php-var">$sortColumn</span>;
</span><span class="l" id="690"><a class="l" href="#690"> 690 </a>                <span class="php-var">$params</span>[<span class="php-quote">'sorttype'</span>] = <span class="php-var">$this</span>-&gt;getSortType();
</span><span class="l" id="691"><a class="l" href="#691"> 691 </a>            }
</span><span class="l" id="692"><a class="l" href="#692"> 692 </a>        }
</span><span class="l" id="693"><a class="l" href="#693"> 693 </a>
</span><span class="l" id="694"><a class="l" href="#694"> 694 </a>        <span class="php-var">$_params</span> = [];
</span><span class="l" id="695"><a class="l" href="#695"> 695 </a>        <span class="php-keyword1">foreach</span> (<span class="php-var">$params</span> <span class="php-keyword1">as</span> <span class="php-var">$name</span> =&gt; <span class="php-var">$value</span>) {
</span><span class="l" id="696"><a class="l" href="#696"> 696 </a>            <span class="php-keyword1">if</span> (<span class="php-keyword2">is_array</span>(<span class="php-var">$value</span>)) {
</span><span class="l" id="697"><a class="l" href="#697"> 697 </a>                <span class="php-keyword1">foreach</span> (<span class="php-var">$value</span> <span class="php-keyword1">as</span> <span class="php-var">$v</span>) {
</span><span class="l" id="698"><a class="l" href="#698"> 698 </a>                    <span class="php-var">$_params</span>[<span class="php-var">$name</span>] = <span class="php-var">$this</span>-&gt;replaceVariables(<span class="php-var">$v</span>);
</span><span class="l" id="699"><a class="l" href="#699"> 699 </a>                }
</span><span class="l" id="700"><a class="l" href="#700"> 700 </a>            } <span class="php-keyword1">else</span> {
</span><span class="l" id="701"><a class="l" href="#701"> 701 </a>                <span class="php-var">$_params</span>[<span class="php-var">$name</span>] = <span class="php-var">$this</span>-&gt;replaceVariables(<span class="php-var">$value</span>);
</span><span class="l" id="702"><a class="l" href="#702"> 702 </a>            }
</span><span class="l" id="703"><a class="l" href="#703"> 703 </a>        }
</span><span class="l" id="704"><a class="l" href="#704"> 704 </a>        <span class="php-keyword1">return</span> rex::isBackend() ? rex_url::backendController(<span class="php-var">$_params</span>, <span class="php-var">$escape</span>) : rex_url::frontendController(<span class="php-var">$_params</span>, <span class="php-var">$escape</span>);
</span><span class="l" id="705"><a class="l" href="#705"> 705 </a>    }
</span><span class="l" id="706"><a class="l" href="#706"> 706 </a>
</span><span class="l" id="707"><a class="l" href="#707"> 707 </a>    <span class="php-comment">// ---------------------- Pagination</span>
</span><span class="l" id="708"><a class="l" href="#708"> 708 </a>
</span><span class="l" id="709"><a class="l" href="#709"> 709 </a>    <span class="php-comment">/**
</span></span><span class="l" id="710"><a class="l" href="#710"> 710 </a><span class="php-comment">     * Prepariert das SQL Statement vorm anzeigen der Liste.
</span></span><span class="l" id="711"><a class="l" href="#711"> 711 </a><span class="php-comment">     *
</span></span><span class="l" id="712"><a class="l" href="#712"> 712 </a><span class="php-comment">     * @param string $query SQL Statement
</span></span><span class="l" id="713"><a class="l" href="#713"> 713 </a><span class="php-comment">     *
</span></span><span class="l" id="714"><a class="l" href="#714"> 714 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="715"><a class="l" href="#715"> 715 </a><span class="php-comment">     */</span>
</span><span class="l" id="716"><a class="l" href="#716"> 716 </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a href="#_prepareQuery" id="_prepareQuery">prepareQuery</a>(<span class="php-var">$query</span>)
</span><span class="l" id="717"><a class="l" href="#717"> 717 </a>    {
</span><span class="l" id="718"><a class="l" href="#718"> 718 </a>        <span class="php-var">$rowsPerPage</span> = <span class="php-var">$this</span>-&gt;pager-&gt;getRowsPerPage();
</span><span class="l" id="719"><a class="l" href="#719"> 719 </a>        <span class="php-var">$startRow</span> = <span class="php-var">$this</span>-&gt;pager-&gt;getCursor();
</span><span class="l" id="720"><a class="l" href="#720"> 720 </a>
</span><span class="l" id="721"><a class="l" href="#721"> 721 </a>        <span class="php-comment">// prepare query for fast rowcount calculation</span>
</span><span class="l" id="722"><a class="l" href="#722"> 722 </a>        <span class="php-var">$query</span> = <span class="php-keyword2">preg_replace</span>(<span class="php-quote">'/^\s*SELECT/i'</span>, <span class="php-quote">'SELECT SQL_CALC_FOUND_ROWS'</span>, <span class="php-var">$query</span>, <span class="php-num">1</span>);
</span><span class="l" id="723"><a class="l" href="#723"> 723 </a>
</span><span class="l" id="724"><a class="l" href="#724"> 724 </a>        <span class="php-var">$sortColumn</span> = <span class="php-var">$this</span>-&gt;getSortColumn();
</span><span class="l" id="725"><a class="l" href="#725"> 725 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$sortColumn</span> != <span class="php-quote">''</span>) {
</span><span class="l" id="726"><a class="l" href="#726"> 726 </a>            <span class="php-var">$sortType</span> = <span class="php-var">$this</span>-&gt;getSortType();
</span><span class="l" id="727"><a class="l" href="#727"> 727 </a>
</span><span class="l" id="728"><a class="l" href="#728"> 728 </a>            <span class="php-var">$sql</span> = rex_sql::factory();
</span><span class="l" id="729"><a class="l" href="#729"> 729 </a>            <span class="php-var">$sortColumn</span> = <span class="php-var">$sql</span>-&gt;escapeIdentifier(<span class="php-var">$sortColumn</span>);
</span><span class="l" id="730"><a class="l" href="#730"> 730 </a>
</span><span class="l" id="731"><a class="l" href="#731"> 731 </a>            <span class="php-keyword1">if</span> (<span class="php-keyword2">stripos</span>(<span class="php-var">$query</span>, <span class="php-quote">' ORDER BY '</span>) === <span class="php-keyword1">false</span>) {
</span><span class="l" id="732"><a class="l" href="#732"> 732 </a>                <span class="php-var">$query</span> .= <span class="php-quote">' ORDER BY '</span> . <span class="php-var">$sortColumn</span> . <span class="php-quote">' '</span> . <span class="php-var">$sortType</span>;
</span><span class="l" id="733"><a class="l" href="#733"> 733 </a>            } <span class="php-keyword1">else</span> {
</span><span class="l" id="734"><a class="l" href="#734"> 734 </a>                <span class="php-var">$query</span> = <span class="php-keyword2">preg_replace</span>(<span class="php-quote">'/ORDER\sBY\s[^ ]*(\sasc|\sdesc)?/i'</span>, <span class="php-quote">'ORDER BY '</span> . <span class="php-var">$sortColumn</span> . <span class="php-quote">' '</span> . <span class="php-var">$sortType</span>, <span class="php-var">$query</span>);
</span><span class="l" id="735"><a class="l" href="#735"> 735 </a>            }
</span><span class="l" id="736"><a class="l" href="#736"> 736 </a>        }
</span><span class="l" id="737"><a class="l" href="#737"> 737 </a>
</span><span class="l" id="738"><a class="l" href="#738"> 738 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword2">stripos</span>(<span class="php-var">$query</span>, <span class="php-quote">' LIMIT '</span>) === <span class="php-keyword1">false</span>) {
</span><span class="l" id="739"><a class="l" href="#739"> 739 </a>            <span class="php-var">$query</span> .= <span class="php-quote">' LIMIT '</span> . <span class="php-var">$startRow</span> . <span class="php-quote">','</span> . <span class="php-var">$rowsPerPage</span>;
</span><span class="l" id="740"><a class="l" href="#740"> 740 </a>        }
</span><span class="l" id="741"><a class="l" href="#741"> 741 </a>
</span><span class="l" id="742"><a class="l" href="#742"> 742 </a>        <span class="php-keyword1">return</span> <span class="php-var">$query</span>;
</span><span class="l" id="743"><a class="l" href="#743"> 743 </a>    }
</span><span class="l" id="744"><a class="l" href="#744"> 744 </a>
</span><span class="l" id="745"><a class="l" href="#745"> 745 </a>    <span class="php-comment">/**
</span></span><span class="l" id="746"><a class="l" href="#746"> 746 </a><span class="php-comment">     * Gibt die Anzahl der Zeilen zurück, welche vom ursprüngliche SQL Statement betroffen werden.
</span></span><span class="l" id="747"><a class="l" href="#747"> 747 </a><span class="php-comment">     *
</span></span><span class="l" id="748"><a class="l" href="#748"> 748 </a><span class="php-comment">     * @return int
</span></span><span class="l" id="749"><a class="l" href="#749"> 749 </a><span class="php-comment">     */</span>
</span><span class="l" id="750"><a class="l" href="#750"> 750 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getRows" id="_getRows">getRows</a>()
</span><span class="l" id="751"><a class="l" href="#751"> 751 </a>    {
</span><span class="l" id="752"><a class="l" href="#752"> 752 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;rows;
</span><span class="l" id="753"><a class="l" href="#753"> 753 </a>    }
</span><span class="l" id="754"><a class="l" href="#754"> 754 </a>
</span><span class="l" id="755"><a class="l" href="#755"> 755 </a>    <span class="php-comment">/**
</span></span><span class="l" id="756"><a class="l" href="#756"> 756 </a><span class="php-comment">     * Returns the pager for this list.
</span></span><span class="l" id="757"><a class="l" href="#757"> 757 </a><span class="php-comment">     *
</span></span><span class="l" id="758"><a class="l" href="#758"> 758 </a><span class="php-comment">     * @return rex_pager
</span></span><span class="l" id="759"><a class="l" href="#759"> 759 </a><span class="php-comment">     */</span>
</span><span class="l" id="760"><a class="l" href="#760"> 760 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getPager" id="_getPager">getPager</a>()
</span><span class="l" id="761"><a class="l" href="#761"> 761 </a>    {
</span><span class="l" id="762"><a class="l" href="#762"> 762 </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;pager;
</span><span class="l" id="763"><a class="l" href="#763"> 763 </a>    }
</span><span class="l" id="764"><a class="l" href="#764"> 764 </a>
</span><span class="l" id="765"><a class="l" href="#765"> 765 </a>    <span class="php-comment">/**
</span></span><span class="l" id="766"><a class="l" href="#766"> 766 </a><span class="php-comment">     * Gibt zurück, nach welcher Spalte sortiert werden soll.
</span></span><span class="l" id="767"><a class="l" href="#767"> 767 </a><span class="php-comment">     *
</span></span><span class="l" id="768"><a class="l" href="#768"> 768 </a><span class="php-comment">     * @param mixed $default
</span></span><span class="l" id="769"><a class="l" href="#769"> 769 </a><span class="php-comment">     *
</span></span><span class="l" id="770"><a class="l" href="#770"> 770 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="771"><a class="l" href="#771"> 771 </a><span class="php-comment">     */</span>
</span><span class="l" id="772"><a class="l" href="#772"> 772 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getSortColumn" id="_getSortColumn">getSortColumn</a>(<span class="php-var">$default</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="773"><a class="l" href="#773"> 773 </a>    {
</span><span class="l" id="774"><a class="l" href="#774"> 774 </a>        <span class="php-keyword1">if</span> (rex_request(<span class="php-quote">'list'</span>, <span class="php-quote">'string'</span>) == <span class="php-var">$this</span>-&gt;getName()) {
</span><span class="l" id="775"><a class="l" href="#775"> 775 </a>            <span class="php-keyword1">return</span> rex_request(<span class="php-quote">'sort'</span>, <span class="php-quote">'string'</span>, <span class="php-var">$default</span>);
</span><span class="l" id="776"><a class="l" href="#776"> 776 </a>        }
</span><span class="l" id="777"><a class="l" href="#777"> 777 </a>        <span class="php-keyword1">return</span> <span class="php-var">$default</span>;
</span><span class="l" id="778"><a class="l" href="#778"> 778 </a>    }
</span><span class="l" id="779"><a class="l" href="#779"> 779 </a>
</span><span class="l" id="780"><a class="l" href="#780"> 780 </a>    <span class="php-comment">/**
</span></span><span class="l" id="781"><a class="l" href="#781"> 781 </a><span class="php-comment">     * Gibt zurück, in welcher Art und Weise sortiert werden soll (ASC/DESC).
</span></span><span class="l" id="782"><a class="l" href="#782"> 782 </a><span class="php-comment">     *
</span></span><span class="l" id="783"><a class="l" href="#783"> 783 </a><span class="php-comment">     * @param mixed $default
</span></span><span class="l" id="784"><a class="l" href="#784"> 784 </a><span class="php-comment">     *
</span></span><span class="l" id="785"><a class="l" href="#785"> 785 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="786"><a class="l" href="#786"> 786 </a><span class="php-comment">     */</span>
</span><span class="l" id="787"><a class="l" href="#787"> 787 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getSortType" id="_getSortType">getSortType</a>(<span class="php-var">$default</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="788"><a class="l" href="#788"> 788 </a>    {
</span><span class="l" id="789"><a class="l" href="#789"> 789 </a>        <span class="php-keyword1">if</span> (rex_request(<span class="php-quote">'list'</span>, <span class="php-quote">'string'</span>) == <span class="php-var">$this</span>-&gt;getName()) {
</span><span class="l" id="790"><a class="l" href="#790"> 790 </a>            <span class="php-var">$sortType</span> = <span class="php-keyword2">strtolower</span>(rex_request(<span class="php-quote">'sorttype'</span>, <span class="php-quote">'string'</span>));
</span><span class="l" id="791"><a class="l" href="#791"> 791 </a>
</span><span class="l" id="792"><a class="l" href="#792"> 792 </a>            <span class="php-keyword1">if</span> (<span class="php-keyword2">in_array</span>(<span class="php-var">$sortType</span>, [<span class="php-quote">'asc'</span>, <span class="php-quote">'desc'</span>])) {
</span><span class="l" id="793"><a class="l" href="#793"> 793 </a>                <span class="php-keyword1">return</span> <span class="php-var">$sortType</span>;
</span><span class="l" id="794"><a class="l" href="#794"> 794 </a>            }
</span><span class="l" id="795"><a class="l" href="#795"> 795 </a>        }
</span><span class="l" id="796"><a class="l" href="#796"> 796 </a>        <span class="php-keyword1">return</span> <span class="php-var">$default</span>;
</span><span class="l" id="797"><a class="l" href="#797"> 797 </a>    }
</span><span class="l" id="798"><a class="l" href="#798"> 798 </a>
</span><span class="l" id="799"><a class="l" href="#799"> 799 </a>    <span class="php-comment">/**
</span></span><span class="l" id="800"><a class="l" href="#800"> 800 </a><span class="php-comment">     * Gibt die Navigation der Liste zurück.
</span></span><span class="l" id="801"><a class="l" href="#801"> 801 </a><span class="php-comment">     *
</span></span><span class="l" id="802"><a class="l" href="#802"> 802 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="803"><a class="l" href="#803"> 803 </a><span class="php-comment">     */</span>
</span><span class="l" id="804"><a class="l" href="#804"> 804 </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a href="#_getPagination" id="_getPagination">getPagination</a>()
</span><span class="l" id="805"><a class="l" href="#805"> 805 </a>    {
</span><span class="l" id="806"><a class="l" href="#806"> 806 </a>        <span class="php-var">$fragment</span> = <span class="php-keyword1">new</span> rex_fragment();
</span><span class="l" id="807"><a class="l" href="#807"> 807 </a>        <span class="php-var">$fragment</span>-&gt;setVar(<span class="php-quote">'urlprovider'</span>, <span class="php-var">$this</span>);
</span><span class="l" id="808"><a class="l" href="#808"> 808 </a>        <span class="php-var">$fragment</span>-&gt;setVar(<span class="php-quote">'pager'</span>, <span class="php-var">$this</span>-&gt;pager);
</span><span class="l" id="809"><a class="l" href="#809"> 809 </a>        <span class="php-keyword1">return</span> <span class="php-var">$fragment</span>-&gt;parse(<span class="php-quote">'core/navigations/pagination.php'</span>);
</span><span class="l" id="810"><a class="l" href="#810"> 810 </a>    }
</span><span class="l" id="811"><a class="l" href="#811"> 811 </a>
</span><span class="l" id="812"><a class="l" href="#812"> 812 </a>    <span class="php-comment">/**
</span></span><span class="l" id="813"><a class="l" href="#813"> 813 </a><span class="php-comment">     * Gibt den Footer der Liste zurück.
</span></span><span class="l" id="814"><a class="l" href="#814"> 814 </a><span class="php-comment">     *
</span></span><span class="l" id="815"><a class="l" href="#815"> 815 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="816"><a class="l" href="#816"> 816 </a><span class="php-comment">     */</span>
</span><span class="l" id="817"><a class="l" href="#817"> 817 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getFooter" id="_getFooter">getFooter</a>()
</span><span class="l" id="818"><a class="l" href="#818"> 818 </a>    {
</span><span class="l" id="819"><a class="l" href="#819"> 819 </a>        <span class="php-var">$s</span> = <span class="php-quote">''</span>;
</span><span class="l" id="820"><a class="l" href="#820"> 820 </a>        <span class="php-comment">/*
</span></span><span class="l" id="821"><a class="l" href="#821"> 821 </a><span class="php-comment">        $s .= '            &lt;tr&gt;'. "\n";
</span></span><span class="l" id="822"><a class="l" href="#822"> 822 </a><span class="php-comment">        $s .= '                &lt;td colspan="'. count($this-&gt;getColumnNames()) .'"&gt;&lt;input type="text" name="items" value="'. $this-&gt;getRowsPerPage() .'" maxlength="2" /&gt;&lt;input type="submit" value="Anzeigen" /&gt;&lt;/td&gt;'. "\n";
</span></span><span class="l" id="823"><a class="l" href="#823"> 823 </a><span class="php-comment">        $s .= '            &lt;/tr&gt;'. "\n";
</span></span><span class="l" id="824"><a class="l" href="#824"> 824 </a><span class="php-comment">        */</span>
</span><span class="l" id="825"><a class="l" href="#825"> 825 </a>        <span class="php-keyword1">return</span> <span class="php-var">$s</span>;
</span><span class="l" id="826"><a class="l" href="#826"> 826 </a>    }
</span><span class="l" id="827"><a class="l" href="#827"> 827 </a>
</span><span class="l" id="828"><a class="l" href="#828"> 828 </a>    <span class="php-comment">/**
</span></span><span class="l" id="829"><a class="l" href="#829"> 829 </a><span class="php-comment">     * Gibt den Header der Liste zurück.
</span></span><span class="l" id="830"><a class="l" href="#830"> 830 </a><span class="php-comment">     *
</span></span><span class="l" id="831"><a class="l" href="#831"> 831 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="832"><a class="l" href="#832"> 832 </a><span class="php-comment">     */</span>
</span><span class="l" id="833"><a class="l" href="#833"> 833 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getHeader" id="_getHeader">getHeader</a>()
</span><span class="l" id="834"><a class="l" href="#834"> 834 </a>    {
</span><span class="l" id="835"><a class="l" href="#835"> 835 </a>        <span class="php-var">$s</span> = <span class="php-quote">''</span>;
</span><span class="l" id="836"><a class="l" href="#836"> 836 </a>        <span class="php-var">$s</span> .= <span class="php-var">$this</span>-&gt;getPagination();
</span><span class="l" id="837"><a class="l" href="#837"> 837 </a>
</span><span class="l" id="838"><a class="l" href="#838"> 838 </a>        <span class="php-keyword1">return</span> <span class="php-var">$s</span>;
</span><span class="l" id="839"><a class="l" href="#839"> 839 </a>    }
</span><span class="l" id="840"><a class="l" href="#840"> 840 </a>
</span><span class="l" id="841"><a class="l" href="#841"> 841 </a>    <span class="php-comment">// ---------------------- Generate Output</span>
</span><span class="l" id="842"><a class="l" href="#842"> 842 </a>
</span><span class="l" id="843"><a class="l" href="#843"> 843 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_replaceVariable" id="_replaceVariable">replaceVariable</a>(<span class="php-var">$string</span>, <span class="php-var">$varname</span>)
</span><span class="l" id="844"><a class="l" href="#844"> 844 </a>    {
</span><span class="l" id="845"><a class="l" href="#845"> 845 </a>        <span class="php-keyword1">return</span> <span class="php-keyword2">str_replace</span>(<span class="php-quote">'###'</span> . <span class="php-var">$varname</span> . <span class="php-quote">'###'</span>, rex_escape(<span class="php-var">$this</span>-&gt;getValue(<span class="php-var">$varname</span>)), <span class="php-var">$string</span>);
</span><span class="l" id="846"><a class="l" href="#846"> 846 </a>    }
</span><span class="l" id="847"><a class="l" href="#847"> 847 </a>
</span><span class="l" id="848"><a class="l" href="#848"> 848 </a>    <span class="php-comment">/**
</span></span><span class="l" id="849"><a class="l" href="#849"> 849 </a><span class="php-comment">     * Ersetzt alle Variablen im Format ###&amp;lt;Spaltenname&amp;gt;###.
</span></span><span class="l" id="850"><a class="l" href="#850"> 850 </a><span class="php-comment">     *
</span></span><span class="l" id="851"><a class="l" href="#851"> 851 </a><span class="php-comment">     * @param string $value Zu durchsuchender String
</span></span><span class="l" id="852"><a class="l" href="#852"> 852 </a><span class="php-comment">     *
</span></span><span class="l" id="853"><a class="l" href="#853"> 853 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="854"><a class="l" href="#854"> 854 </a><span class="php-comment">     */</span>
</span><span class="l" id="855"><a class="l" href="#855"> 855 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_replaceVariables" id="_replaceVariables">replaceVariables</a>(<span class="php-var">$value</span>)
</span><span class="l" id="856"><a class="l" href="#856"> 856 </a>    {
</span><span class="l" id="857"><a class="l" href="#857"> 857 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword2">strpos</span>(<span class="php-var">$value</span>, <span class="php-quote">'###'</span>) === <span class="php-keyword1">false</span>) {
</span><span class="l" id="858"><a class="l" href="#858"> 858 </a>            <span class="php-keyword1">return</span> <span class="php-var">$value</span>;
</span><span class="l" id="859"><a class="l" href="#859"> 859 </a>        }
</span><span class="l" id="860"><a class="l" href="#860"> 860 </a>
</span><span class="l" id="861"><a class="l" href="#861"> 861 </a>        <span class="php-var">$columnNames</span> = <span class="php-var">$this</span>-&gt;getColumnNames();
</span><span class="l" id="862"><a class="l" href="#862"> 862 </a>
</span><span class="l" id="863"><a class="l" href="#863"> 863 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword2">is_array</span>(<span class="php-var">$columnNames</span>)) {
</span><span class="l" id="864"><a class="l" href="#864"> 864 </a>            <span class="php-keyword1">foreach</span> (<span class="php-var">$columnNames</span> <span class="php-keyword1">as</span> <span class="php-var">$columnName</span>) {
</span><span class="l" id="865"><a class="l" href="#865"> 865 </a>                <span class="php-comment">// Spalten, die mit addColumn eingefügt wurden</span>
</span><span class="l" id="866"><a class="l" href="#866"> 866 </a>                <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;customColumns[<span class="php-var">$columnName</span>])) {
</span><span class="l" id="867"><a class="l" href="#867"> 867 </a>                    <span class="php-keyword1">continue</span>;
</span><span class="l" id="868"><a class="l" href="#868"> 868 </a>                }
</span><span class="l" id="869"><a class="l" href="#869"> 869 </a>
</span><span class="l" id="870"><a class="l" href="#870"> 870 </a>                <span class="php-var">$value</span> = <span class="php-var">$this</span>-&gt;replaceVariable(<span class="php-var">$value</span>, <span class="php-var">$columnName</span>);
</span><span class="l" id="871"><a class="l" href="#871"> 871 </a>            }
</span><span class="l" id="872"><a class="l" href="#872"> 872 </a>        }
</span><span class="l" id="873"><a class="l" href="#873"> 873 </a>        <span class="php-keyword1">return</span> <span class="php-var">$value</span>;
</span><span class="l" id="874"><a class="l" href="#874"> 874 </a>    }
</span><span class="l" id="875"><a class="l" href="#875"> 875 </a>
</span><span class="l" id="876"><a class="l" href="#876"> 876 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_isCustomFormat" id="_isCustomFormat">isCustomFormat</a>(<span class="php-var">$format</span>)
</span><span class="l" id="877"><a class="l" href="#877"> 877 </a>    {
</span><span class="l" id="878"><a class="l" href="#878"> 878 </a>        <span class="php-keyword1">return</span> <span class="php-keyword2">is_array</span>(<span class="php-var">$format</span>) &amp;&amp; <span class="php-keyword1">isset</span>(<span class="php-var">$format</span>[<span class="php-num">0</span>]) &amp;&amp; <span class="php-var">$format</span>[<span class="php-num">0</span>] == <span class="php-quote">'custom'</span>;
</span><span class="l" id="879"><a class="l" href="#879"> 879 </a>    }
</span><span class="l" id="880"><a class="l" href="#880"> 880 </a>
</span><span class="l" id="881"><a class="l" href="#881"> 881 </a>    <span class="php-comment">/**
</span></span><span class="l" id="882"><a class="l" href="#882"> 882 </a><span class="php-comment">     * Formatiert einen übergebenen String anhand der rexFormatter Klasse.
</span></span><span class="l" id="883"><a class="l" href="#883"> 883 </a><span class="php-comment">     *
</span></span><span class="l" id="884"><a class="l" href="#884"> 884 </a><span class="php-comment">     * @param string $value  Zu formatierender String
</span></span><span class="l" id="885"><a class="l" href="#885"> 885 </a><span class="php-comment">     * @param array  $format mit den Formatierungsinformationen
</span></span><span class="l" id="886"><a class="l" href="#886"> 886 </a><span class="php-comment">     * @param bool   $escape Flag, Ob escapen von $value erlaubt ist
</span></span><span class="l" id="887"><a class="l" href="#887"> 887 </a><span class="php-comment">     * @param string $field
</span></span><span class="l" id="888"><a class="l" href="#888"> 888 </a><span class="php-comment">     *
</span></span><span class="l" id="889"><a class="l" href="#889"> 889 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="890"><a class="l" href="#890"> 890 </a><span class="php-comment">     */</span>
</span><span class="l" id="891"><a class="l" href="#891"> 891 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_formatValue" id="_formatValue">formatValue</a>(<span class="php-var">$value</span>, <span class="php-var">$format</span>, <span class="php-var">$escape</span>, <span class="php-var">$field</span> = <span class="php-keyword1">null</span>)
</span><span class="l" id="892"><a class="l" href="#892"> 892 </a>    {
</span><span class="l" id="893"><a class="l" href="#893"> 893 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword2">is_array</span>(<span class="php-var">$format</span>)) {
</span><span class="l" id="894"><a class="l" href="#894"> 894 </a>            <span class="php-comment">// Callbackfunktion -&gt; Parameterliste aufbauen</span>
</span><span class="l" id="895"><a class="l" href="#895"> 895 </a>            <span class="php-keyword1">if</span> (<span class="php-var">$this</span>-&gt;isCustomFormat(<span class="php-var">$format</span>)) {
</span><span class="l" id="896"><a class="l" href="#896"> 896 </a>                <span class="php-var">$format</span>[<span class="php-num">2</span>] = <span class="php-keyword1">isset</span>(<span class="php-var">$format</span>[<span class="php-num">2</span>]) ? <span class="php-var">$format</span>[<span class="php-num">2</span>] : [];
</span><span class="l" id="897"><a class="l" href="#897"> 897 </a>                <span class="php-var">$format</span>[<span class="php-num">1</span>] = [<span class="php-var">$format</span>[<span class="php-num">1</span>], [<span class="php-quote">'list'</span> =&gt; <span class="php-var">$this</span>, <span class="php-quote">'field'</span> =&gt; <span class="php-var">$field</span>, <span class="php-quote">'value'</span> =&gt; <span class="php-var">$value</span>, <span class="php-quote">'format'</span> =&gt; <span class="php-var">$format</span>[<span class="php-num">0</span>], <span class="php-quote">'escape'</span> =&gt; <span class="php-var">$escape</span>, <span class="php-quote">'params'</span> =&gt; <span class="php-var">$format</span>[<span class="php-num">2</span>]]];
</span><span class="l" id="898"><a class="l" href="#898"> 898 </a>            }
</span><span class="l" id="899"><a class="l" href="#899"> 899 </a>
</span><span class="l" id="900"><a class="l" href="#900"> 900 </a>            <span class="php-var">$value</span> = rex_formatter::format(<span class="php-var">$value</span>, <span class="php-var">$format</span>[<span class="php-num">0</span>], <span class="php-var">$format</span>[<span class="php-num">1</span>]);
</span><span class="l" id="901"><a class="l" href="#901"> 901 </a>        }
</span><span class="l" id="902"><a class="l" href="#902"> 902 </a>
</span><span class="l" id="903"><a class="l" href="#903"> 903 </a>        <span class="php-comment">// Nur escapen, wenn formatter aufgerufen wird, der kein html zurückgeben können soll</span>
</span><span class="l" id="904"><a class="l" href="#904"> 904 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$escape</span> &amp;&amp;
</span><span class="l" id="905"><a class="l" href="#905"> 905 </a>            !<span class="php-var">$this</span>-&gt;isCustomFormat(<span class="php-var">$format</span>) &amp;&amp;
</span><span class="l" id="906"><a class="l" href="#906"> 906 </a>            <span class="php-var">$format</span>[<span class="php-num">0</span>] != <span class="php-quote">'email'</span> &amp;&amp;
</span><span class="l" id="907"><a class="l" href="#907"> 907 </a>            <span class="php-var">$format</span>[<span class="php-num">0</span>] != <span class="php-quote">'url'</span>
</span><span class="l" id="908"><a class="l" href="#908"> 908 </a>        ) {
</span><span class="l" id="909"><a class="l" href="#909"> 909 </a>            <span class="php-var">$value</span> = rex_escape(<span class="php-var">$value</span>);
</span><span class="l" id="910"><a class="l" href="#910"> 910 </a>        }
</span><span class="l" id="911"><a class="l" href="#911"> 911 </a>
</span><span class="l" id="912"><a class="l" href="#912"> 912 </a>        <span class="php-keyword1">return</span> <span class="php-var">$value</span>;
</span><span class="l" id="913"><a class="l" href="#913"> 913 </a>    }
</span><span class="l" id="914"><a class="l" href="#914"> 914 </a>
</span><span class="l" id="915"><a class="l" href="#915"> 915 </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a href="#__getAttributeString" id="__getAttributeString">_getAttributeString</a>(<span class="php-var">$array</span>)
</span><span class="l" id="916"><a class="l" href="#916"> 916 </a>    {
</span><span class="l" id="917"><a class="l" href="#917"> 917 </a>        <span class="php-var">$s</span> = <span class="php-quote">''</span>;
</span><span class="l" id="918"><a class="l" href="#918"> 918 </a>
</span><span class="l" id="919"><a class="l" href="#919"> 919 </a>        <span class="php-keyword1">foreach</span> (<span class="php-var">$array</span> <span class="php-keyword1">as</span> <span class="php-var">$name</span> =&gt; <span class="php-var">$value</span>) {
</span><span class="l" id="920"><a class="l" href="#920"> 920 </a>            <span class="php-var">$s</span> .= <span class="php-quote">' '</span> . rex_escape(<span class="php-var">$name</span>, <span class="php-quote">'html_attr'</span>) . <span class="php-quote">'="'</span> . rex_escape(<span class="php-var">$value</span>) . <span class="php-quote">'"'</span>;
</span><span class="l" id="921"><a class="l" href="#921"> 921 </a>        }
</span><span class="l" id="922"><a class="l" href="#922"> 922 </a>
</span><span class="l" id="923"><a class="l" href="#923"> 923 </a>        <span class="php-keyword1">return</span> <span class="php-var">$s</span>;
</span><span class="l" id="924"><a class="l" href="#924"> 924 </a>    }
</span><span class="l" id="925"><a class="l" href="#925"> 925 </a>
</span><span class="l" id="926"><a class="l" href="#926"> 926 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getColumnLink" id="_getColumnLink">getColumnLink</a>(<span class="php-var">$columnName</span>, <span class="php-var">$columnValue</span>, <span class="php-var">$params</span> = [])
</span><span class="l" id="927"><a class="l" href="#927"> 927 </a>    {
</span><span class="l" id="928"><a class="l" href="#928"> 928 </a>        <span class="php-keyword1">return</span> <span class="php-quote">'&lt;a href="'</span> . <span class="php-var">$this</span>-&gt;getParsedUrl(<span class="php-keyword2">array_merge</span>(<span class="php-var">$this</span>-&gt;getColumnParams(<span class="php-var">$columnName</span>), <span class="php-var">$params</span>)) . <span class="php-quote">'"'</span> . <span class="php-var">$this</span>-&gt;_getAttributeString(<span class="php-var">$this</span>-&gt;getLinkAttributes(<span class="php-var">$columnName</span>, [])) . <span class="php-quote">'&gt;'</span> . <span class="php-var">$columnValue</span> . <span class="php-quote">'&lt;/a&gt;'</span>;
</span><span class="l" id="929"><a class="l" href="#929"> 929 </a>    }
</span><span class="l" id="930"><a class="l" href="#930"> 930 </a>
</span><span class="l" id="931"><a class="l" href="#931"> 931 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getValue" id="_getValue">getValue</a>(<span class="php-var">$colname</span>)
</span><span class="l" id="932"><a class="l" href="#932"> 932 </a>    {
</span><span class="l" id="933"><a class="l" href="#933"> 933 </a>        <span class="php-keyword1">return</span> <span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;customColumns[<span class="php-var">$colname</span>]) ? <span class="php-var">$this</span>-&gt;customColumns[<span class="php-var">$colname</span>] : <span class="php-var">$this</span>-&gt;sql-&gt;getValue(<span class="php-var">$colname</span>);
</span><span class="l" id="934"><a class="l" href="#934"> 934 </a>    }
</span><span class="l" id="935"><a class="l" href="#935"> 935 </a>
</span><span class="l" id="936"><a class="l" href="#936"> 936 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_getArrayValue" id="_getArrayValue">getArrayValue</a>(<span class="php-var">$colname</span>)
</span><span class="l" id="937"><a class="l" href="#937"> 937 </a>    {
</span><span class="l" id="938"><a class="l" href="#938"> 938 </a>        <span class="php-keyword1">return</span> <span class="php-keyword2">json_decode</span>(<span class="php-var">$this</span>-&gt;getValue(<span class="php-var">$colname</span>), <span class="php-keyword1">true</span>);
</span><span class="l" id="939"><a class="l" href="#939"> 939 </a>    }
</span><span class="l" id="940"><a class="l" href="#940"> 940 </a>
</span><span class="l" id="941"><a class="l" href="#941"> 941 </a>    <span class="php-comment">/**
</span></span><span class="l" id="942"><a class="l" href="#942"> 942 </a><span class="php-comment">     * Erstellt den Tabellen Quellcode.
</span></span><span class="l" id="943"><a class="l" href="#943"> 943 </a><span class="php-comment">     *
</span></span><span class="l" id="944"><a class="l" href="#944"> 944 </a><span class="php-comment">     * @return string
</span></span><span class="l" id="945"><a class="l" href="#945"> 945 </a><span class="php-comment">     */</span>
</span><span class="l" id="946"><a class="l" href="#946"> 946 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_get" id="_get">get</a>()
</span><span class="l" id="947"><a class="l" href="#947"> 947 </a>    {
</span><span class="l" id="948"><a class="l" href="#948"> 948 </a>        rex_extension::registerPoint(<span class="php-keyword1">new</span> rex_extension_point(<span class="php-quote">'REX_LIST_GET'</span>, <span class="php-var">$this</span>, [], <span class="php-keyword1">true</span>));
</span><span class="l" id="949"><a class="l" href="#949"> 949 </a>
</span><span class="l" id="950"><a class="l" href="#950"> 950 </a>        <span class="php-var">$s</span> = <span class="php-quote">"\n"</span>;
</span><span class="l" id="951"><a class="l" href="#951"> 951 </a>
</span><span class="l" id="952"><a class="l" href="#952"> 952 </a>        <span class="php-comment">// Form vars</span>
</span><span class="l" id="953"><a class="l" href="#953"> 953 </a>        <span class="php-var">$this</span>-&gt;addFormAttribute(<span class="php-quote">'action'</span>, <span class="php-var">$this</span>-&gt;getUrl([], <span class="php-keyword1">false</span>));
</span><span class="l" id="954"><a class="l" href="#954"> 954 </a>        <span class="php-var">$this</span>-&gt;addFormAttribute(<span class="php-quote">'method'</span>, <span class="php-quote">'post'</span>);
</span><span class="l" id="955"><a class="l" href="#955"> 955 </a>
</span><span class="l" id="956"><a class="l" href="#956"> 956 </a>        <span class="php-comment">// Table vars</span>
</span><span class="l" id="957"><a class="l" href="#957"> 957 </a>        <span class="php-var">$caption</span> = <span class="php-var">$this</span>-&gt;getCaption();
</span><span class="l" id="958"><a class="l" href="#958"> 958 </a>        <span class="php-var">$tableColumnGroups</span> = <span class="php-var">$this</span>-&gt;getTableColumnGroups();
</span><span class="l" id="959"><a class="l" href="#959"> 959 </a>        <span class="php-var">$class</span> = <span class="php-quote">'table'</span>;
</span><span class="l" id="960"><a class="l" href="#960"> 960 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;tableAttributes[<span class="php-quote">'class'</span>])) {
</span><span class="l" id="961"><a class="l" href="#961"> 961 </a>            <span class="php-var">$class</span> .= <span class="php-quote">' '</span> . <span class="php-var">$this</span>-&gt;tableAttributes[<span class="php-quote">'class'</span>];
</span><span class="l" id="962"><a class="l" href="#962"> 962 </a>        }
</span><span class="l" id="963"><a class="l" href="#963"> 963 </a>        <span class="php-var">$this</span>-&gt;addTableAttribute(<span class="php-quote">'class'</span>, <span class="php-var">$class</span>);
</span><span class="l" id="964"><a class="l" href="#964"> 964 </a>
</span><span class="l" id="965"><a class="l" href="#965"> 965 </a>        <span class="php-comment">// Columns vars</span>
</span><span class="l" id="966"><a class="l" href="#966"> 966 </a>        <span class="php-var">$columnFormates</span> = [];
</span><span class="l" id="967"><a class="l" href="#967"> 967 </a>        <span class="php-var">$columnNames</span> = [];
</span><span class="l" id="968"><a class="l" href="#968"> 968 </a>        <span class="php-keyword1">foreach</span> (<span class="php-var">$this</span>-&gt;getColumnNames() <span class="php-keyword1">as</span> <span class="php-var">$columnName</span>) {
</span><span class="l" id="969"><a class="l" href="#969"> 969 </a>            <span class="php-keyword1">if</span> (!<span class="php-keyword2">in_array</span>(<span class="php-var">$columnName</span>, <span class="php-var">$this</span>-&gt;columnDisabled)) {
</span><span class="l" id="970"><a class="l" href="#970"> 970 </a>                <span class="php-var">$columnNames</span>[] = <span class="php-var">$columnName</span>;
</span><span class="l" id="971"><a class="l" href="#971"> 971 </a>            }
</span><span class="l" id="972"><a class="l" href="#972"> 972 </a>        }
</span><span class="l" id="973"><a class="l" href="#973"> 973 </a>
</span><span class="l" id="974"><a class="l" href="#974"> 974 </a>        <span class="php-comment">// List vars</span>
</span><span class="l" id="975"><a class="l" href="#975"> 975 </a>        <span class="php-var">$sortColumn</span> = <span class="php-var">$this</span>-&gt;getSortColumn();
</span><span class="l" id="976"><a class="l" href="#976"> 976 </a>        <span class="php-var">$sortType</span> = <span class="php-var">$this</span>-&gt;getSortType();
</span><span class="l" id="977"><a class="l" href="#977"> 977 </a>        <span class="php-var">$warning</span> = <span class="php-var">$this</span>-&gt;getWarning();
</span><span class="l" id="978"><a class="l" href="#978"> 978 </a>        <span class="php-var">$message</span> = <span class="php-var">$this</span>-&gt;getMessage();
</span><span class="l" id="979"><a class="l" href="#979"> 979 </a>        <span class="php-var">$nbRows</span> = <span class="php-var">$this</span>-&gt;getRows();
</span><span class="l" id="980"><a class="l" href="#980"> 980 </a>
</span><span class="l" id="981"><a class="l" href="#981"> 981 </a>        <span class="php-var">$header</span> = <span class="php-var">$this</span>-&gt;getHeader();
</span><span class="l" id="982"><a class="l" href="#982"> 982 </a>        <span class="php-var">$footer</span> = <span class="php-var">$this</span>-&gt;getFooter();
</span><span class="l" id="983"><a class="l" href="#983"> 983 </a>
</span><span class="l" id="984"><a class="l" href="#984"> 984 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$warning</span> != <span class="php-quote">''</span>) {
</span><span class="l" id="985"><a class="l" href="#985"> 985 </a>            <span class="php-var">$s</span> .= rex_view::warning(<span class="php-var">$warning</span>) . <span class="php-quote">"\n"</span>;
</span><span class="l" id="986"><a class="l" href="#986"> 986 </a>        } <span class="php-keyword1">elseif</span> (<span class="php-var">$message</span> != <span class="php-quote">''</span>) {
</span><span class="l" id="987"><a class="l" href="#987"> 987 </a>            <span class="php-var">$s</span> .= rex_view::info(<span class="php-var">$message</span>) . <span class="php-quote">"\n"</span>;
</span><span class="l" id="988"><a class="l" href="#988"> 988 </a>        }
</span><span class="l" id="989"><a class="l" href="#989"> 989 </a>
</span><span class="l" id="990"><a class="l" href="#990"> 990 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$header</span> != <span class="php-quote">''</span>) {
</span><span class="l" id="991"><a class="l" href="#991"> 991 </a>            <span class="php-var">$s</span> .= <span class="php-var">$header</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="992"><a class="l" href="#992"> 992 </a>        }
</span><span class="l" id="993"><a class="l" href="#993"> 993 </a>
</span><span class="l" id="994"><a class="l" href="#994"> 994 </a>        <span class="php-var">$s</span> .= <span class="php-quote">'&lt;form'</span> . <span class="php-var">$this</span>-&gt;_getAttributeString(<span class="php-var">$this</span>-&gt;getFormAttributes()) . <span class="php-quote">'&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="995"><a class="l" href="#995"> 995 </a>        <span class="php-var">$s</span> .= <span class="php-quote">'    &lt;table'</span> . <span class="php-var">$this</span>-&gt;_getAttributeString(<span class="php-var">$this</span>-&gt;getTableAttributes()) . <span class="php-quote">'&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="996"><a class="l" href="#996"> 996 </a>
</span><span class="l" id="997"><a class="l" href="#997"> 997 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$caption</span> != <span class="php-quote">''</span>) {
</span><span class="l" id="998"><a class="l" href="#998"> 998 </a>            <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;caption&gt;'</span> . rex_escape(<span class="php-var">$caption</span>) . <span class="php-quote">'&lt;/caption&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="999"><a class="l" href="#999"> 999 </a>        }
</span><span class="l" id="1000"><a class="l" href="#1000">1000 </a>
</span><span class="l" id="1001"><a class="l" href="#1001">1001 </a>        <span class="php-keyword1">if</span> (<span class="php-keyword2">count</span>(<span class="php-var">$tableColumnGroups</span>) &gt; <span class="php-num">0</span>) {
</span><span class="l" id="1002"><a class="l" href="#1002">1002 </a>            <span class="php-keyword1">foreach</span> (<span class="php-var">$tableColumnGroups</span> <span class="php-keyword1">as</span> <span class="php-var">$tableColumnGroup</span>) {
</span><span class="l" id="1003"><a class="l" href="#1003">1003 </a>                <span class="php-var">$tableColumns</span> = <span class="php-var">$tableColumnGroup</span>[<span class="php-quote">'columns'</span>];
</span><span class="l" id="1004"><a class="l" href="#1004">1004 </a>                <span class="php-keyword1">unset</span>(<span class="php-var">$tableColumnGroup</span>[<span class="php-quote">'columns'</span>]);
</span><span class="l" id="1005"><a class="l" href="#1005">1005 </a>
</span><span class="l" id="1006"><a class="l" href="#1006">1006 </a>                <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;colgroup'</span> . <span class="php-var">$this</span>-&gt;_getAttributeString(<span class="php-var">$tableColumnGroup</span>) . <span class="php-quote">'&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1007"><a class="l" href="#1007">1007 </a>
</span><span class="l" id="1008"><a class="l" href="#1008">1008 </a>                <span class="php-keyword1">foreach</span> (<span class="php-var">$tableColumns</span> <span class="php-keyword1">as</span> <span class="php-var">$tableColumn</span>) {
</span><span class="l" id="1009"><a class="l" href="#1009">1009 </a>                    <span class="php-var">$s</span> .= <span class="php-quote">'            &lt;col'</span> . <span class="php-var">$this</span>-&gt;_getAttributeString(<span class="php-var">$tableColumn</span>) . <span class="php-quote">' /&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1010"><a class="l" href="#1010">1010 </a>                }
</span><span class="l" id="1011"><a class="l" href="#1011">1011 </a>
</span><span class="l" id="1012"><a class="l" href="#1012">1012 </a>                <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;/colgroup&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1013"><a class="l" href="#1013">1013 </a>            }
</span><span class="l" id="1014"><a class="l" href="#1014">1014 </a>        }
</span><span class="l" id="1015"><a class="l" href="#1015">1015 </a>
</span><span class="l" id="1016"><a class="l" href="#1016">1016 </a>        <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;thead&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1017"><a class="l" href="#1017">1017 </a>        <span class="php-var">$s</span> .= <span class="php-quote">'            &lt;tr&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1018"><a class="l" href="#1018">1018 </a>        <span class="php-keyword1">foreach</span> (<span class="php-var">$columnNames</span> <span class="php-keyword1">as</span> <span class="php-var">$columnName</span>) {
</span><span class="l" id="1019"><a class="l" href="#1019">1019 </a>            <span class="php-var">$columnHead</span> = <span class="php-var">$this</span>-&gt;getColumnLabel(<span class="php-var">$columnName</span>);
</span><span class="l" id="1020"><a class="l" href="#1020">1020 </a>            <span class="php-keyword1">if</span> (<span class="php-var">$this</span>-&gt;hasColumnOption(<span class="php-var">$columnName</span>, REX_LIST_OPT_SORT)) {
</span><span class="l" id="1021"><a class="l" href="#1021">1021 </a>                <span class="php-keyword1">if</span> (<span class="php-var">$columnName</span> == <span class="php-var">$sortColumn</span>) {
</span><span class="l" id="1022"><a class="l" href="#1022">1022 </a>                    <span class="php-var">$columnSortType</span> = <span class="php-var">$sortType</span> == <span class="php-quote">'desc'</span> ? <span class="php-quote">'asc'</span> : <span class="php-quote">'desc'</span>;
</span><span class="l" id="1023"><a class="l" href="#1023">1023 </a>                } <span class="php-keyword1">else</span> {
</span><span class="l" id="1024"><a class="l" href="#1024">1024 </a>                    <span class="php-var">$columnSortType</span> = <span class="php-var">$this</span>-&gt;getColumnOption(<span class="php-var">$columnName</span>, REX_LIST_OPT_SORT_DIRECTION, <span class="php-quote">'asc'</span>);
</span><span class="l" id="1025"><a class="l" href="#1025">1025 </a>                }
</span><span class="l" id="1026"><a class="l" href="#1026">1026 </a>                <span class="php-var">$columnHead</span> = <span class="php-quote">'&lt;a href="'</span> . <span class="php-var">$this</span>-&gt;getUrl([<span class="php-var">$this</span>-&gt;pager-&gt;getCursorName() =&gt; <span class="php-var">$this</span>-&gt;pager-&gt;getCursor(), <span class="php-quote">'sort'</span> =&gt; <span class="php-var">$columnName</span>, <span class="php-quote">'sorttype'</span> =&gt; <span class="php-var">$columnSortType</span>]) . <span class="php-quote">'"&gt;'</span> . <span class="php-var">$columnHead</span> . <span class="php-quote">'&lt;/a&gt;'</span>;
</span><span class="l" id="1027"><a class="l" href="#1027">1027 </a>            }
</span><span class="l" id="1028"><a class="l" href="#1028">1028 </a>
</span><span class="l" id="1029"><a class="l" href="#1029">1029 </a>            <span class="php-var">$layout</span> = <span class="php-var">$this</span>-&gt;getColumnLayout(<span class="php-var">$columnName</span>);
</span><span class="l" id="1030"><a class="l" href="#1030">1030 </a>            <span class="php-var">$s</span> .= <span class="php-quote">'        '</span> . <span class="php-keyword2">str_replace</span>(<span class="php-quote">'###VALUE###'</span>, <span class="php-var">$columnHead</span>, <span class="php-var">$layout</span>[<span class="php-num">0</span>]) . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1031"><a class="l" href="#1031">1031 </a>
</span><span class="l" id="1032"><a class="l" href="#1032">1032 </a>            <span class="php-comment">// Formatierungen hier holen, da diese Schleife jede Spalte nur einmal durchläuft</span>
</span><span class="l" id="1033"><a class="l" href="#1033">1033 </a>            <span class="php-var">$columnFormates</span>[<span class="php-var">$columnName</span>] = <span class="php-var">$this</span>-&gt;getColumnFormat(<span class="php-var">$columnName</span>);
</span><span class="l" id="1034"><a class="l" href="#1034">1034 </a>        }
</span><span class="l" id="1035"><a class="l" href="#1035">1035 </a>        <span class="php-var">$s</span> .= <span class="php-quote">'            &lt;/tr&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1036"><a class="l" href="#1036">1036 </a>        <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;/thead&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1037"><a class="l" href="#1037">1037 </a>
</span><span class="l" id="1038"><a class="l" href="#1038">1038 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$footer</span> != <span class="php-quote">''</span>) {
</span><span class="l" id="1039"><a class="l" href="#1039">1039 </a>            <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;tfoot&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1040"><a class="l" href="#1040">1040 </a>            <span class="php-var">$s</span> .= <span class="php-var">$footer</span>;
</span><span class="l" id="1041"><a class="l" href="#1041">1041 </a>            <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;/tfoot&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1042"><a class="l" href="#1042">1042 </a>        }
</span><span class="l" id="1043"><a class="l" href="#1043">1043 </a>
</span><span class="l" id="1044"><a class="l" href="#1044">1044 </a>        <span class="php-keyword1">if</span> (<span class="php-var">$nbRows</span> &gt; <span class="php-num">0</span>) {
</span><span class="l" id="1045"><a class="l" href="#1045">1045 </a>            <span class="php-var">$maxRows</span> = <span class="php-var">$nbRows</span> - <span class="php-var">$this</span>-&gt;pager-&gt;getCursor();
</span><span class="l" id="1046"><a class="l" href="#1046">1046 </a>
</span><span class="l" id="1047"><a class="l" href="#1047">1047 </a>            <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;tbody&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1048"><a class="l" href="#1048">1048 </a>            <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$this</span>-&gt;pager-&gt;getRowsPerPage() &amp;&amp; <span class="php-var">$i</span> &lt; <span class="php-var">$maxRows</span>; ++<span class="php-var">$i</span>) {
</span><span class="l" id="1049"><a class="l" href="#1049">1049 </a>                <span class="php-var">$s</span> .= <span class="php-quote">'            &lt;tr&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1050"><a class="l" href="#1050">1050 </a>                <span class="php-keyword1">foreach</span> (<span class="php-var">$columnNames</span> <span class="php-keyword1">as</span> <span class="php-var">$columnName</span>) {
</span><span class="l" id="1051"><a class="l" href="#1051">1051 </a>                    <span class="php-var">$columnValue</span> = <span class="php-var">$this</span>-&gt;formatValue(<span class="php-var">$this</span>-&gt;getValue(<span class="php-var">$columnName</span>), <span class="php-var">$columnFormates</span>[<span class="php-var">$columnName</span>], !<span class="php-keyword1">isset</span>(<span class="php-var">$this</span>-&gt;customColumns[<span class="php-var">$columnName</span>]), <span class="php-var">$columnName</span>);
</span><span class="l" id="1052"><a class="l" href="#1052">1052 </a>
</span><span class="l" id="1053"><a class="l" href="#1053">1053 </a>                    <span class="php-keyword1">if</span> (!<span class="php-var">$this</span>-&gt;isCustomFormat(<span class="php-var">$columnFormates</span>[<span class="php-var">$columnName</span>]) &amp;&amp; <span class="php-var">$this</span>-&gt;hasColumnParams(<span class="php-var">$columnName</span>)) {
</span><span class="l" id="1054"><a class="l" href="#1054">1054 </a>                        <span class="php-var">$columnValue</span> = <span class="php-var">$this</span>-&gt;getColumnLink(<span class="php-var">$columnName</span>, <span class="php-var">$columnValue</span>);
</span><span class="l" id="1055"><a class="l" href="#1055">1055 </a>                    }
</span><span class="l" id="1056"><a class="l" href="#1056">1056 </a>
</span><span class="l" id="1057"><a class="l" href="#1057">1057 </a>                    <span class="php-var">$columnHead</span> = <span class="php-var">$this</span>-&gt;getColumnLabel(<span class="php-var">$columnName</span>);
</span><span class="l" id="1058"><a class="l" href="#1058">1058 </a>                    <span class="php-var">$layout</span> = <span class="php-var">$this</span>-&gt;getColumnLayout(<span class="php-var">$columnName</span>);
</span><span class="l" id="1059"><a class="l" href="#1059">1059 </a>                    <span class="php-var">$columnValue</span> = <span class="php-keyword2">str_replace</span>([<span class="php-quote">'###VALUE###'</span>, <span class="php-quote">'###LABEL###'</span>], [<span class="php-var">$columnValue</span>, <span class="php-var">$columnHead</span>], <span class="php-var">$layout</span>[<span class="php-num">1</span>]);
</span><span class="l" id="1060"><a class="l" href="#1060">1060 </a>                    <span class="php-var">$columnValue</span> = <span class="php-var">$this</span>-&gt;replaceVariables(<span class="php-var">$columnValue</span>);
</span><span class="l" id="1061"><a class="l" href="#1061">1061 </a>                    <span class="php-var">$s</span> .= <span class="php-quote">'        '</span> . <span class="php-var">$columnValue</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1062"><a class="l" href="#1062">1062 </a>                }
</span><span class="l" id="1063"><a class="l" href="#1063">1063 </a>                <span class="php-var">$s</span> .= <span class="php-quote">'            &lt;/tr&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1064"><a class="l" href="#1064">1064 </a>
</span><span class="l" id="1065"><a class="l" href="#1065">1065 </a>                <span class="php-var">$this</span>-&gt;sql-&gt;<span class="php-keyword2">next</span>();
</span><span class="l" id="1066"><a class="l" href="#1066">1066 </a>            }
</span><span class="l" id="1067"><a class="l" href="#1067">1067 </a>            <span class="php-var">$s</span> .= <span class="php-quote">'        &lt;/tbody&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1068"><a class="l" href="#1068">1068 </a>        } <span class="php-keyword1">else</span> {
</span><span class="l" id="1069"><a class="l" href="#1069">1069 </a>            <span class="php-var">$s</span> .= <span class="php-quote">'&lt;tr class="table-no-results"&gt;&lt;td colspan="'</span> . <span class="php-keyword2">count</span>(<span class="php-var">$columnNames</span>) . <span class="php-quote">'"&gt;'</span> . <span class="php-var">$this</span>-&gt;getNoRowsMessage() . <span class="php-quote">'&lt;/td&gt;&lt;/tr&gt;'</span>;
</span><span class="l" id="1070"><a class="l" href="#1070">1070 </a>        }
</span><span class="l" id="1071"><a class="l" href="#1071">1071 </a>
</span><span class="l" id="1072"><a class="l" href="#1072">1072 </a>        <span class="php-var">$s</span> .= <span class="php-quote">'    &lt;/table&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1073"><a class="l" href="#1073">1073 </a>        <span class="php-var">$s</span> .= <span class="php-quote">'&lt;/form&gt;'</span> . <span class="php-quote">"\n"</span>;
</span><span class="l" id="1074"><a class="l" href="#1074">1074 </a>
</span><span class="l" id="1075"><a class="l" href="#1075">1075 </a>        <span class="php-keyword1">return</span> <span class="php-var">$s</span>;
</span><span class="l" id="1076"><a class="l" href="#1076">1076 </a>    }
</span><span class="l" id="1077"><a class="l" href="#1077">1077 </a>
</span><span class="l" id="1078"><a class="l" href="#1078">1078 </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a href="#_show" id="_show">show</a>()
</span><span class="l" id="1079"><a class="l" href="#1079">1079 </a>    {
</span><span class="l" id="1080"><a class="l" href="#1080">1080 </a>        <span class="php-keyword1">echo</span> <span class="php-var">$this</span>-&gt;get();
</span><span class="l" id="1081"><a class="l" href="#1081">1081 </a>    }
</span><span class="l" id="1082"><a class="l" href="#1082">1082 </a>}
</span><span class="l" id="1083"><a class="l" href="#1083">1083 </a></span></code></pre>
 </body>
</html>
