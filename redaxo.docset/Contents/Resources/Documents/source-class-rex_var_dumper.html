<!DOCTYPE html>
<html lang="de">
 <head>
  <meta charset="utf-8"/>
  <link href="../Assets/css/styles.css" rel="stylesheet"/>
  <script src="../Assets/js/script.js">
  </script>
 </head>
 <body>
  <pre id="source"><code><span class="l" id="1"> 1 <span class="xlang">&lt;?php</span>
</span><span class="l" id="2"> 2 
</span><span class="l" id="3"> 3 <span class="php-keyword1">use</span> Symfony\Component\VarDumper\Cloner\VarCloner;
</span><span class="l" id="4"> 4 <span class="php-keyword1">use</span> Symfony\Component\VarDumper\Dumper\CliDumper;
</span><span class="l" id="5"> 5 <span class="php-keyword1">use</span> Symfony\Component\VarDumper\Dumper\DataDumperInterface;
</span><span class="l" id="6"> 6 <span class="php-keyword1">use</span> Symfony\Component\VarDumper\Dumper\HtmlDumper;
</span><span class="l" id="7"> 7 <span class="php-keyword1">use</span> Symfony\Component\VarDumper\VarDumper;
</span><span class="l" id="8"> 8 
</span><span class="l" id="9"> 9 <span class="php-comment">/**
</span></span><span class="l" id="10">10 <span class="php-comment"> * @package redaxo\core
</span></span><span class="l" id="11">11 <span class="php-comment"> */</span>
</span><span class="l" id="12">12 <span class="php-keyword1">abstract</span> <span class="php-keyword1">class</span> rex_var_dumper
</span><span class="l" id="13">13 {
</span><span class="l" id="14">14     <span class="php-comment">/** @var VarCloner */</span>
</span><span class="l" id="15">15     <span class="php-keyword1">private</span> <span class="php-keyword1">static</span> <span class="php-var">$cloner</span>;
</span><span class="l" id="16">16 
</span><span class="l" id="17">17     <span class="php-comment">/** @var DataDumperInterface */</span>
</span><span class="l" id="18">18     <span class="php-keyword1">private</span> <span class="php-keyword1">static</span> <span class="php-var">$dumper</span>;
</span><span class="l" id="19">19 
</span><span class="l" id="20">20     <span class="php-keyword1">public</span> <span class="php-keyword1">static</span> <span class="php-keyword1">function</span> register()
</span><span class="l" id="21">21     {
</span><span class="l" id="22">22         VarDumper::setHandler(<span class="php-keyword1">function</span> (<span class="php-var">$var</span>) {
</span><span class="l" id="23">23             <span class="php-keyword1">if</span> (rex::isDebugMode() || (<span class="php-var">$user</span> = rex_backend_login::createUser()) &amp;&amp; <span class="php-var">$user</span>-&gt;isAdmin()) {
</span><span class="l" id="24">24                 VarDumper::setHandler([self::<span class="php-keyword1">class</span>, <span class="php-quote">'dump'</span>]);
</span><span class="l" id="25">25                 self::dump(<span class="php-var">$var</span>);
</span><span class="l" id="26">26 
</span><span class="l" id="27">27                 <span class="php-keyword1">return</span>;
</span><span class="l" id="28">28             }
</span><span class="l" id="29">29 
</span><span class="l" id="30">30             <span class="php-comment">// register noop handler for non-admins (if not in debug mode)</span>
</span><span class="l" id="31">31             VarDumper::setHandler(<span class="php-keyword1">function</span> (<span class="php-var">$var</span>) {
</span><span class="l" id="32">32                 <span class="php-comment">// noop</span>
</span><span class="l" id="33">33             });
</span><span class="l" id="34">34         });
</span><span class="l" id="35">35     }
</span><span class="l" id="36">36 
</span><span class="l" id="37">37     <span class="php-keyword1">public</span> <span class="php-keyword1">static</span> <span class="php-keyword1">function</span> dump(<span class="php-var">$var</span>)
</span><span class="l" id="38">38     {
</span><span class="l" id="39">39         <span class="php-keyword1">if</span> (!self::<span class="php-var">$cloner</span>) {
</span><span class="l" id="40">40             self::<span class="php-var">$cloner</span> = <span class="php-keyword1">new</span> VarCloner();
</span><span class="l" id="41">41             <span class="php-keyword1">if</span> (<span class="php-quote">'cli'</span> === PHP_SAPI) {
</span><span class="l" id="42">42                 self::<span class="php-var">$dumper</span> = <span class="php-keyword1">new</span> CliDumper();
</span><span class="l" id="43">43             } <span class="php-keyword1">else</span> {
</span><span class="l" id="44">44                 <span class="php-var">$styleAll</span> = <span class="php-quote">'font-family: "Fira Code", Menlo, Monaco, Consolas, monospace; font-size: 14px; line-height: 1.4 !important;'</span>;
</span><span class="l" id="45">45                 self::<span class="php-var">$dumper</span> = <span class="php-keyword1">new</span> HtmlDumper();
</span><span class="l" id="46">46                 self::<span class="php-var">$dumper</span>-&gt;setDumpBoundaries(<span class="php-quote">'&lt;pre class="rex-var-dumper sf-dump" id="%s" data-indent-pad="%s"&gt;'</span>, <span class="php-quote">'&lt;/pre&gt;&lt;script&gt;Sfdump(%s)&lt;/script&gt;'</span>);
</span><span class="l" id="47">47                 self::<span class="php-var">$dumper</span>-&gt;setIndentPad(<span class="php-quote">'    '</span>);
</span><span class="l" id="48">48                 self::<span class="php-var">$dumper</span>-&gt;setStyles([
</span><span class="l" id="49">49                     <span class="php-quote">'default'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'
</span></span><span class="l" id="50">50 <span class="php-quote">                        position: relative;
</span></span><span class="l" id="51">51 <span class="php-quote">                        z-index: 99999;
</span></span><span class="l" id="52">52 <span class="php-quote">                        padding: 10px;
</span></span><span class="l" id="53">53 <span class="php-quote">                        background-color: #263238;
</span></span><span class="l" id="54">54 <span class="php-quote">                        border: 0;
</span></span><span class="l" id="55">55 <span class="php-quote">                        color: #eeffff;
</span></span><span class="l" id="56">56 <span class="php-quote">                        white-space: pre-wrap;
</span></span><span class="l" id="57">57 <span class="php-quote">                        word-break: normal;
</span></span><span class="l" id="58">58 <span class="php-quote">                        word-wrap: break-word;
</span></span><span class="l" id="59">59 <span class="php-quote">                    '</span>,
</span><span class="l" id="60">60                     <span class="php-quote">'const'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #F78C6C; font-weight: 700;'</span>,
</span><span class="l" id="61">61                     <span class="php-quote">'ellipsis'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #eeffff;'</span>,
</span><span class="l" id="62">62                     <span class="php-quote">'index'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #C3E88D;'</span>,
</span><span class="l" id="63">63                     <span class="php-quote">'key'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #C3E88D;'</span>,
</span><span class="l" id="64">64                     <span class="php-quote">'meta'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #89DDFF;'</span>,
</span><span class="l" id="65">65                     <span class="php-quote">'note'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #FFB62C;'</span>,
</span><span class="l" id="66">66                     <span class="php-quote">'num'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #F78C6C;'</span>,
</span><span class="l" id="67">67                     <span class="php-quote">'protected'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #C792EA;'</span>,
</span><span class="l" id="68">68                     <span class="php-quote">'private'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #C792EA;'</span>,
</span><span class="l" id="69">69                     <span class="php-quote">'public'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #C792EA;'</span>,
</span><span class="l" id="70">70                     <span class="php-quote">'ref'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #eeffff;'</span>,
</span><span class="l" id="71">71                     <span class="php-quote">'str'</span> =&gt; <span class="php-var">$styleAll</span> . <span class="php-quote">'color: #FF5370;'</span>,
</span><span class="l" id="72">72                 ]);
</span><span class="l" id="73">73             }
</span><span class="l" id="74">74         }
</span><span class="l" id="75">75 
</span><span class="l" id="76">76         self::<span class="php-var">$dumper</span>-&gt;dump(self::<span class="php-var">$cloner</span>-&gt;cloneVar(<span class="php-var">$var</span>));
</span><span class="l" id="77">77     }
</span><span class="l" id="78">78 }
</span><span class="l" id="79">79 </span></code></pre>
 </body>
</html>
