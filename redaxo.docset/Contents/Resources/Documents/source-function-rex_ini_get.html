<!DOCTYPE html>
<html lang="de">
 <head>
  <meta charset="utf-8"/>
  <link href="../Assets/css/styles.css" rel="stylesheet"/>
  <script src="../Assets/js/script.js">
  </script>
 </head>
 <body>
  <pre id="source"><code><span class="l" id="1"> 1 <span class="xlang">&lt;?php</span>
</span><span class="l" id="2"> 2 
</span><span class="l" id="3"> 3 <span class="php-comment">/**
</span></span><span class="l" id="4"> 4 <span class="php-comment"> * Functions.
</span></span><span class="l" id="5"> 5 <span class="php-comment"> *
</span></span><span class="l" id="6"> 6 <span class="php-comment"> * @package redaxo5
</span></span><span class="l" id="7"> 7 <span class="php-comment"> */</span>
</span><span class="l" id="8"> 8 
</span><span class="l" id="9"> 9 <span class="php-comment">/**
</span></span><span class="l" id="10">10 <span class="php-comment"> * Deletes the cache.
</span></span><span class="l" id="11">11 <span class="php-comment"> *
</span></span><span class="l" id="12">12 <span class="php-comment"> * @package redaxo\core
</span></span><span class="l" id="13">13 <span class="php-comment"> */</span>
</span><span class="l" id="14">14 <span class="php-keyword1">function</span> rex_delete_cache()
</span><span class="l" id="15">15 {
</span><span class="l" id="16">16     <span class="php-comment">// close logger, so the logfile can also be deleted</span>
</span><span class="l" id="17">17     rex_logger::close();
</span><span class="l" id="18">18 
</span><span class="l" id="19">19     <span class="php-var">$finder</span> = rex_finder::factory(rex_path::cache())
</span><span class="l" id="20">20         -&gt;recursive()
</span><span class="l" id="21">21         -&gt;childFirst()
</span><span class="l" id="22">22         -&gt;ignoreFiles([<span class="php-quote">'.htaccess'</span>, <span class="php-quote">'.redaxo'</span>], <span class="php-keyword1">false</span>)
</span><span class="l" id="23">23         -&gt;ignoreSystemStuff(<span class="php-keyword1">false</span>);
</span><span class="l" id="24">24     rex_dir::deleteIterator(<span class="php-var">$finder</span>);
</span><span class="l" id="25">25 
</span><span class="l" id="26">26     rex_clang::<span class="php-keyword2">reset</span>();
</span><span class="l" id="27">27 
</span><span class="l" id="28">28     <span class="php-keyword1">if</span> (!rex::isSetup()) {
</span><span class="l" id="29">29         rex_config::refresh();
</span><span class="l" id="30">30     }
</span><span class="l" id="31">31 
</span><span class="l" id="32">32     <span class="php-comment">// ----- EXTENSION POINT</span>
</span><span class="l" id="33">33     <span class="php-keyword1">return</span> rex_extension::registerPoint(<span class="php-keyword1">new</span> rex_extension_point(<span class="php-quote">'CACHE_DELETED'</span>, rex_i18n::msg(<span class="php-quote">'delete_cache_message'</span>)));
</span><span class="l" id="34">34 }
</span><span class="l" id="35">35 
</span><span class="l" id="36">36 <span class="php-comment">/**
</span></span><span class="l" id="37">37 <span class="php-comment"> * @param string $val
</span></span><span class="l" id="38">38 <span class="php-comment"> *
</span></span><span class="l" id="39">39 <span class="php-comment"> * @return mixed
</span></span><span class="l" id="40">40 <span class="php-comment"> *
</span></span><span class="l" id="41">41 <span class="php-comment"> * @package redaxo\core
</span></span><span class="l" id="42">42 <span class="php-comment"> */</span>
</span><span class="l" id="43">43 <span class="php-keyword1">function</span> rex_ini_get(<span class="php-var">$val</span>)
</span><span class="l" id="44">44 {
</span><span class="l" id="45">45     <span class="php-var">$val</span> = <span class="php-keyword2">trim</span>(<span class="php-keyword2">ini_get</span>(<span class="php-var">$val</span>));
</span><span class="l" id="46">46     <span class="php-keyword1">if</span> (<span class="php-var">$val</span> != <span class="php-quote">''</span>) {
</span><span class="l" id="47">47         <span class="php-var">$last</span> = <span class="php-keyword2">strtolower</span>(<span class="php-var">$val</span>[<span class="php-keyword2">strlen</span>(<span class="php-var">$val</span>) - <span class="php-num">1</span>]);
</span><span class="l" id="48">48     } <span class="php-keyword1">else</span> {
</span><span class="l" id="49">49         <span class="php-var">$last</span> = <span class="php-quote">''</span>;
</span><span class="l" id="50">50     }
</span><span class="l" id="51">51     <span class="php-var">$val</span> = (int) <span class="php-var">$val</span>;
</span><span class="l" id="52">52     <span class="php-keyword1">switch</span> (<span class="php-var">$last</span>) {
</span><span class="l" id="53">53             <span class="php-comment">// The 'G' modifier is available since PHP 5.1.0</span>
</span><span class="l" id="54">54             <span class="php-keyword1">case</span> <span class="php-quote">'g'</span>:
</span><span class="l" id="55">55                     <span class="php-var">$val</span> *= <span class="php-num">1024</span>;
</span><span class="l" id="56">56                     <span class="php-comment">// no break</span>
</span><span class="l" id="57">57             <span class="php-keyword1">case</span> <span class="php-quote">'m'</span>:
</span><span class="l" id="58">58                     <span class="php-var">$val</span> *= <span class="php-num">1024</span>;
</span><span class="l" id="59">59                     <span class="php-comment">// no break</span>
</span><span class="l" id="60">60             <span class="php-keyword1">case</span> <span class="php-quote">'k'</span>:
</span><span class="l" id="61">61                     <span class="php-var">$val</span> *= <span class="php-num">1024</span>;
</span><span class="l" id="62">62     }
</span><span class="l" id="63">63 
</span><span class="l" id="64">64     <span class="php-keyword1">return</span> <span class="php-var">$val</span>;
</span><span class="l" id="65">65 }
</span><span class="l" id="66">66 </span></code></pre>
 </body>
</html>
